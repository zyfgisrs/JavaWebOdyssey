2023-11-05 10:04:09.102 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 10:05:09.017 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 10:05:28.222 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 10:06:47.016 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [DrityReadTest]: []
2023-11-05 10:06:47.023 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 10:06:47.033 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [DrityReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 10:06:47.034 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [DrityReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 10:06:47.043 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.DrityReadTest
2023-11-05 10:06:47.044 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.DrityReadTest
2023-11-05 10:06:47.068 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 10:06:47.069 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 10:06:47.089 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 10:06:47.097 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 10:06:47.132 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 10:06:47.133 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 10:06:47.133 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 10:06:47.216 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 10:06:47.220 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 10:06:47.221 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 10:06:47.225 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 10:06:47.228 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 10:06:47.233 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:06:47.235 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:06:47.236 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:06:47.236 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:06:47.236 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:06:47.239 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:06:47.240 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:06:47.240 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:06:47.240 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:06:47.241 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:06:47.241 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 10:06:47.243 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 10:06:47.244 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 10:06:47.246 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 10:06:47.253 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 10:06:47.259 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 10:06:47.266 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 10:06:47.267 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 10:06:47.277 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5910de75 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 10:06:47.278 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5910de75 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 10:06:47.281 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [DrityReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 10:06:47.285 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5910de75 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 10:06:47.285 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5910de75 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 10:06:47.289 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5910de75 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 10:06:47.289 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5910de75 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 10:06:47.289 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [DrityReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 10:06:47.291 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2023-11-05 10:06:47.291 [t1] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 10:06:47.294 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5910de75 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 10:06:47.294 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [DrityReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 10:06:47.294 [t1] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 10:06:47.294 [t1] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 10:06:47.295 [t1] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 10:06:47.295 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 10:06:47.295 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 10:06:47.295 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 10:06:47.295 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 10:06:47.295 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 10:06:47.295 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 10:06:47.296 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 10:06:47.296 [t1] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 10:06:47.296 [t1] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 10:06:47.296 [t1] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 10:06:47.296 [t1] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 10:06:47.297 [t1] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 10:06:47.297 [t1] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 10:06:47.297 [t1] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 10:06:47.297 [t1] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 10:06:47.297 [t1] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 10:06:47.298 [t1] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 10:06:47.298 [t1] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 10:06:47.298 [t1] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 10:06:47.298 [t1] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 10:06:47.298 [t1] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 10:06:47.298 [t1] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 10:06:47.298 [t1] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 10:06:47.298 [t1] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 10:06:47.298 [t1] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 10:06:47.298 [t1] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 10:06:47.298 [t1] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 10:06:47.298 [t1] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 10:06:47.298 [t1] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 10:06:47.299 [t1] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 10:06:47.299 [t1] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 10:06:47.299 [t1] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 10:06:47.299 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 10:06:47.303 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 10:06:47 CST 2023
2023-11-05 10:12:56.870 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [DrityReadTest]: []
2023-11-05 10:12:56.878 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 10:12:56.887 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [DrityReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 10:12:56.888 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [DrityReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 10:12:56.896 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.DrityReadTest
2023-11-05 10:12:56.897 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.DrityReadTest
2023-11-05 10:12:56.922 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 10:12:56.923 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 10:12:56.949 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@558bdf1f
2023-11-05 10:12:56.961 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 10:12:56.997 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 10:12:56.998 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 10:12:56.998 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 10:12:57.073 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 10:12:57.075 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 10:12:57.076 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 10:12:57.082 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 10:12:57.084 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 10:12:57.091 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:12:57.094 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:12:57.094 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:12:57.094 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:12:57.095 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:12:57.098 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:12:57.099 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:12:57.100 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:12:57.100 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:12:57.100 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:12:57.100 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 10:12:57.103 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 10:12:57.103 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 10:12:57.106 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 10:12:57.111 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 10:12:57.116 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 10:12:57.124 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 10:12:57.125 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 10:12:57.136 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@3deb2326 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 10:12:57.138 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@3deb2326 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 10:12:57.141 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [DrityReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 10:12:57.148 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@3deb2326 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 10:12:57.149 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@3deb2326 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 10:12:57.154 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@3deb2326 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 10:12:57.155 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@3deb2326 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 10:12:57.155 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [DrityReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 10:12:57.158 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@3deb2326 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 10:12:57.159 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [DrityReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 10:12:57.168 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@558bdf1f, started on Sun Nov 05 10:12:56 CST 2023
2023-11-05 10:17:59.102 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [DrityReadTest]: []
2023-11-05 10:17:59.110 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 10:17:59.119 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [DrityReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 10:17:59.120 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [DrityReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 10:17:59.128 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.DrityReadTest
2023-11-05 10:17:59.128 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.DrityReadTest
2023-11-05 10:17:59.164 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 10:17:59.165 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 10:17:59.204 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 10:17:59.212 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 10:17:59.245 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 10:17:59.246 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 10:17:59.246 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 10:17:59.328 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 10:17:59.332 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 10:17:59.334 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 10:17:59.339 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 10:17:59.340 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 10:17:59.347 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:17:59.348 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:17:59.348 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:17:59.350 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:17:59.350 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:17:59.353 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:17:59.354 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:17:59.354 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:17:59.354 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:17:59.355 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 10:17:59.355 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 10:17:59.357 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 10:17:59.358 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 10:17:59.360 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 10:17:59.366 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 10:17:59.372 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 10:17:59.379 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 10:17:59.380 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 10:17:59.389 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@1f130eaf size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 10:17:59.390 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@1f130eaf size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 10:17:59.394 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [DrityReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 10:17:59.399 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@1f130eaf size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 10:17:59.400 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@1f130eaf size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 10:17:59.426 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing SQL query [SELECT * FROM posts]
2023-11-05 10:17:59.428 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 10:17:59.430 [t2] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 10:17:59.433 [t2] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 10:17:59.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 10:17:59.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 10:17:59.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 10:17:59.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 10:17:59.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 10:17:59.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 10:17:59.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 10:17:59.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 10:17:59.435 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 10:17:59.435 [t2] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 10:17:59.435 [t2] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 10:17:59.435 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 10:17:59.435 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 10:17:59.436 [t2] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 10:17:59.436 [t2] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 10:17:59.436 [t2] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 10:17:59.436 [t2] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 10:17:59.436 [t2] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 10:17:59.436 [t2] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 10:17:59.436 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 10:17:59.437 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 10:17:59.437 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 10:17:59.437 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 10:17:59.437 [t2] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 10:17:59.437 [t2] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 10:17:59.437 [t2] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 10:17:59.437 [t2] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 10:17:59.438 [t2] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 10:17:59.438 [t2] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 10:17:59.438 [t2] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 10:17:59.438 [t2] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 10:17:59.438 [t2] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 10:17:59.438 [t2] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 10:17:59.438 [t2] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 10:17:59.438 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 10:17:59.677 [t2] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7f776078
2023-11-05 10:17:59.678 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 10:17:59.699 [t2] INFO  com.zhouyf.service.impl.BlogServiceDirtyRead - t2线程查询到了0条数据
2023-11-05 10:17:59.786 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 10:17:59.787 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 10:17:59.799 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7091567a
2023-11-05 10:17:59.827 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5183a30e
2023-11-05 10:17:59.860 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@55cd9e3c
2023-11-05 10:17:59.889 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3784eb01
2023-11-05 10:17:59.921 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@417a41bb
2023-11-05 10:17:59.952 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6add351e
2023-11-05 10:17:59.982 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3cd2ccb9
2023-11-05 10:18:00.013 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@a1fb844
2023-11-05 10:18:00.042 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3c867c41
2023-11-05 10:18:00.074 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@39739f93
2023-11-05 10:18:00.106 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7ea2d13b
2023-11-05 10:18:00.139 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7d60c270
2023-11-05 10:18:00.170 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@622dc6a
2023-11-05 10:18:00.201 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@478a281a
2023-11-05 10:18:00.239 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@18415e25
2023-11-05 10:18:00.266 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4d9c67db
2023-11-05 10:18:00.294 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1b9aa11e
2023-11-05 10:18:00.326 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@429294ef
2023-11-05 10:18:00.358 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@468ff334
2023-11-05 10:18:00.381 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After adding stats (total=20, active=0, idle=20, waiting=0)
2023-11-05 10:18:00.413 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 10:18:00.414 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 10:18:00.414 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 10:18:00.432 [t1] INFO  com.zhouyf.service.impl.BlogServiceDirtyRead - t1线程插入数据成功
2023-11-05 10:18:01.703 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing SQL query [SELECT * FROM posts]
2023-11-05 10:18:01.704 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 10:18:01.718 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 10:18:01.722 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 10:18:01.723 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 10:18:01.723 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 10:18:01.723 [t2] INFO  com.zhouyf.service.impl.BlogServiceDirtyRead - t2线程查询到了1条数据
2023-11-05 10:18:05.442 [t1] INFO  com.zhouyf.service.impl.BlogServiceDirtyRead - t1线程事务提交成功
2023-11-05 10:18:29.789 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=20, active=0, idle=20, waiting=0)
2023-11-05 10:18:29.789 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=20, active=0, idle=20, waiting=0)
2023-11-05 10:18:29.790 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-05 10:18:45.495 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 10:17:59 CST 2023
2023-11-05 10:18:45.495 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 10:18:45.495 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=20, active=0, idle=20, waiting=0)
2023-11-05 10:18:45.496 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7f776078: (connection evicted)
2023-11-05 10:18:45.497 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7091567a: (connection evicted)
2023-11-05 10:18:45.498 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5183a30e: (connection evicted)
2023-11-05 10:18:45.498 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@55cd9e3c: (connection evicted)
2023-11-05 10:18:45.498 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3784eb01: (connection evicted)
2023-11-05 10:18:45.498 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@417a41bb: (connection evicted)
2023-11-05 10:18:45.499 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6add351e: (connection evicted)
2023-11-05 10:18:45.499 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3cd2ccb9: (connection evicted)
2023-11-05 10:18:45.499 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@a1fb844: (connection evicted)
2023-11-05 10:18:45.499 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3c867c41: (connection evicted)
2023-11-05 10:18:45.500 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@39739f93: (connection evicted)
2023-11-05 10:18:45.500 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7ea2d13b: (connection evicted)
2023-11-05 10:18:45.500 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7d60c270: (connection evicted)
2023-11-05 10:18:45.500 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@622dc6a: (connection evicted)
2023-11-05 10:18:45.501 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@478a281a: (connection evicted)
2023-11-05 10:18:45.501 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@18415e25: (connection evicted)
2023-11-05 10:18:45.501 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4d9c67db: (connection evicted)
2023-11-05 10:18:45.501 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1b9aa11e: (connection evicted)
2023-11-05 10:18:45.501 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@429294ef: (connection evicted)
2023-11-05 10:18:45.502 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@468ff334: (connection evicted)
2023-11-05 10:18:45.502 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 10:18:45.502 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 11:34:16.738 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 11:34:16.755 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 11:34:16.771 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 11:34:16.773 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:34:16.787 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 11:34:16.788 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 11:34:16.810 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 11:34:16.810 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 11:34:16.833 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 11:34:16.840 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 11:34:16.874 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 11:34:16.875 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 11:34:16.876 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 11:34:16.876 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 11:34:16.958 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 11:34:16.962 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 11:34:16.963 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 11:34:16.967 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 11:34:16.969 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 11:34:16.977 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:34:16.979 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:34:16.980 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:34:16.980 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:34:16.980 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:34:16.984 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:34:16.985 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:34:16.985 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:34:16.985 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:34:16.986 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:34:16.986 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 11:34:16.989 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 11:34:16.990 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 11:34:16.992 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 11:34:17.001 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 11:34:17.009 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 11:34:17.020 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 11:34:17.020 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 11:34:17.022 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 11:34:17.035 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 11:34:17.037 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 11:34:17.042 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:34:17.046 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 11:34:17.047 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 11:34:17.073 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 11:34:17.074 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 11:34:17.075 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 11:34:17.075 [t2] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 11:34:17.079 [t2] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 11:34:17.079 [t2] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 11:34:17.079 [t2] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 11:34:17.079 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 11:34:17.079 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 11:34:17.079 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 11:34:17.080 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 11:34:17.080 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 11:34:17.080 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 11:34:17.080 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 11:34:17.080 [t2] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 11:34:17.080 [t2] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 11:34:17.080 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 11:34:17.081 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 11:34:17.081 [t2] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 11:34:17.081 [t2] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 11:34:17.081 [t2] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 11:34:17.081 [t2] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 11:34:17.081 [t2] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 11:34:17.081 [t2] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 11:34:17.081 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 11:34:17.081 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 11:34:17.082 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 11:34:17.082 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 11:34:17.082 [t2] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 11:34:17.082 [t2] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 11:34:17.082 [t2] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 11:34:17.082 [t2] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 11:34:17.082 [t2] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 11:34:17.082 [t2] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 11:34:17.082 [t2] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 11:34:17.082 [t2] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 11:34:17.082 [t2] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 11:34:17.082 [t2] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 11:34:17.082 [t2] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 11:34:17.082 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 11:34:17.320 [t2] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@36135965
2023-11-05 11:34:17.321 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 11:34:17.345 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 11:34:17.347 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 11:34:17.348 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 11:34:17.348 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 11:34:17.349 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了1条数据
2023-11-05 11:34:17.433 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=1, active=1, idle=0, waiting=0)
2023-11-05 11:34:17.434 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=1, active=1, idle=0, waiting=0)
2023-11-05 11:34:17.453 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@63ca9ab3
2023-11-05 11:34:17.482 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42d86fc7
2023-11-05 11:34:17.505 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4696d1a6
2023-11-05 11:34:17.535 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3b06b2fd
2023-11-05 11:34:17.566 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5548e15
2023-11-05 11:34:17.599 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@e84033c
2023-11-05 11:34:17.629 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@58c8f488
2023-11-05 11:34:17.659 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6d47aede
2023-11-05 11:34:17.692 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@34019fcc
2023-11-05 11:34:17.724 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@174cdf27
2023-11-05 11:34:17.754 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@16541c03
2023-11-05 11:34:17.785 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1e80420a
2023-11-05 11:34:17.815 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@459d7231
2023-11-05 11:34:17.848 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@123028f2
2023-11-05 11:34:17.881 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4f05250c
2023-11-05 11:34:17.908 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42b39817
2023-11-05 11:34:17.940 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@618b0e34
2023-11-05 11:34:17.971 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4dd17147
2023-11-05 11:34:18.001 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@70e29f88
2023-11-05 11:34:18.031 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@44f1b780
2023-11-05 11:34:18.056 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After adding stats (total=21, active=1, idle=20, waiting=0)
2023-11-05 11:34:18.057 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 11:34:18.057 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 11:34:18.057 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 11:34:18.078 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 11:34:18.086 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 11:34:22.356 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 11:34:22.356 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 11:34:22.359 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 11:34:22.360 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 11:34:22.360 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 11:34:22.361 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 11:34:22.362 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了2条数据
2023-11-05 11:34:22.363 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Should roll back transaction but cannot - no transaction available
2023-11-05 11:34:47.436 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=21, active=0, idle=21, waiting=0)
2023-11-05 11:34:47.437 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=21, active=0, idle=21, waiting=0)
2023-11-05 11:34:47.438 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
2023-11-05 11:34:58.848 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 11:34:16 CST 2023
2023-11-05 11:34:58.849 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 11:34:58.849 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=21, active=0, idle=21, waiting=0)
2023-11-05 11:34:58.850 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@36135965: (connection evicted)
2023-11-05 11:34:58.852 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@63ca9ab3: (connection evicted)
2023-11-05 11:34:58.852 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@42d86fc7: (connection evicted)
2023-11-05 11:34:58.852 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4696d1a6: (connection evicted)
2023-11-05 11:34:58.853 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3b06b2fd: (connection evicted)
2023-11-05 11:34:58.853 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5548e15: (connection evicted)
2023-11-05 11:34:58.853 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@e84033c: (connection evicted)
2023-11-05 11:34:58.853 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@58c8f488: (connection evicted)
2023-11-05 11:34:58.854 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6d47aede: (connection evicted)
2023-11-05 11:34:58.854 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@34019fcc: (connection evicted)
2023-11-05 11:34:58.854 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@174cdf27: (connection evicted)
2023-11-05 11:34:58.855 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@16541c03: (connection evicted)
2023-11-05 11:34:58.855 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1e80420a: (connection evicted)
2023-11-05 11:34:58.855 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@459d7231: (connection evicted)
2023-11-05 11:34:58.855 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@123028f2: (connection evicted)
2023-11-05 11:34:58.856 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4f05250c: (connection evicted)
2023-11-05 11:34:58.856 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@42b39817: (connection evicted)
2023-11-05 11:34:58.856 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@618b0e34: (connection evicted)
2023-11-05 11:34:58.856 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4dd17147: (connection evicted)
2023-11-05 11:34:58.857 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@70e29f88: (connection evicted)
2023-11-05 11:34:58.857 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@44f1b780: (connection evicted)
2023-11-05 11:34:58.857 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 11:34:58.857 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 11:35:49.608 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 11:35:49.616 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 11:35:49.627 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 11:35:49.629 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:35:49.638 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 11:35:49.638 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 11:35:49.661 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 11:35:49.662 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 11:35:49.692 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 11:35:49.701 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 11:35:49.733 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 11:35:49.734 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 11:35:49.735 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 11:35:49.735 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 11:35:49.809 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 11:35:49.811 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 11:35:49.812 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 11:35:49.816 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 11:35:49.819 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 11:35:49.827 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:35:49.829 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:35:49.830 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:35:49.830 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:35:49.830 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:35:49.833 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:35:49.834 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:35:49.834 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:35:49.834 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:35:49.835 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:35:49.835 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 11:35:49.837 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 11:35:49.838 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 11:35:49.840 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 11:35:49.847 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 11:35:49.852 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 11:35:49.860 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 11:35:49.861 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 11:35:49.862 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 11:35:49.873 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 11:35:49.875 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 11:35:49.879 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:35:49.884 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 11:35:49.885 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 11:36:07.952 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 11:35:49 CST 2023
2023-11-05 11:36:40.646 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 11:36:40.656 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 11:36:40.665 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 11:36:40.667 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:36:40.677 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 11:36:40.678 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 11:36:40.702 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 11:36:40.703 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 11:36:40.735 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 11:36:40.744 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 11:36:40.778 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 11:36:40.779 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 11:36:40.780 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 11:36:40.780 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 11:36:40.868 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 11:36:40.872 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 11:36:40.873 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 11:36:40.878 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 11:36:40.880 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 11:36:40.887 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:36:40.890 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:36:40.890 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:36:40.890 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:36:40.890 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:36:40.893 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:36:40.894 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:36:40.894 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:36:40.894 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:36:40.895 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:36:40.895 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 11:36:40.898 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 11:36:40.899 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 11:36:40.900 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 11:36:40.908 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 11:36:40.916 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 11:36:40.923 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 11:36:40.924 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 11:36:40.925 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 11:36:40.934 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 11:36:40.935 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 11:36:40.938 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:36:40.942 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 11:36:40.943 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 11:36:43.660 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 11:36:40 CST 2023
2023-11-05 11:39:02.480 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 11:39:02.490 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 11:39:02.500 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 11:39:02.501 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:39:02.511 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 11:39:02.512 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 11:39:02.541 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 11:39:02.541 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 11:39:02.573 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 11:39:02.582 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 11:39:02.617 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 11:39:02.618 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 11:39:02.620 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 11:39:02.620 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 11:39:02.713 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 11:39:02.716 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 11:39:02.717 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 11:39:02.721 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 11:39:02.724 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 11:39:02.730 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:39:02.732 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:39:02.732 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:39:02.732 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:39:02.733 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:39:02.735 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:39:02.736 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:39:02.736 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:39:02.736 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:39:02.737 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:39:02.737 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 11:39:02.739 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 11:39:02.740 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 11:39:02.742 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 11:39:02.747 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 11:39:02.752 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 11:39:02.758 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 11:39:02.760 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 11:39:02.761 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 11:39:02.770 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 11:39:02.771 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 11:39:02.775 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:39:02.780 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 11:39:02.780 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 11:39:03.800 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 11:39:03.801 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 11:39:03.802 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 11:39:03.803 [t1] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 11:39:03.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 11:39:03.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 11:39:03.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 11:39:03.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 11:39:03.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 11:39:03.809 [t1] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 11:39:03.809 [t1] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 11:39:03.809 [t1] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 11:39:03.809 [t1] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 11:39:03.809 [t1] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 11:39:03.809 [t1] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 11:39:03.809 [t1] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 11:39:03.809 [t1] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 11:39:03.809 [t1] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 11:39:03.809 [t1] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 11:39:03.809 [t1] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 11:39:03.809 [t1] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 11:39:03.809 [t1] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 11:39:03.809 [t1] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 11:39:03.810 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 11:39:04.035 [t1] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@66d5d431
2023-11-05 11:39:04.037 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 11:39:04.056 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 11:39:04.060 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 11:39:04.142 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 11:39:04.143 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 11:39:04.158 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@bd6450c
2023-11-05 11:39:04.183 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2ac4b078
2023-11-05 11:39:04.214 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2e8a6e15
2023-11-05 11:39:04.244 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@e143942
2023-11-05 11:39:04.277 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@400bdd32
2023-11-05 11:39:04.306 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1a77bb32
2023-11-05 11:39:04.337 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@58c82e4
2023-11-05 11:39:04.366 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6e1f160e
2023-11-05 11:39:04.405 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7b978072
2023-11-05 11:39:04.427 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1fa275c4
2023-11-05 11:39:04.458 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2f383354
2023-11-05 11:39:04.490 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@22e1c873
2023-11-05 11:39:04.522 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@30d23aaa
2023-11-05 11:39:04.552 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@47df3c66
2023-11-05 11:39:04.588 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@112f3918
2023-11-05 11:39:04.615 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1fd40c61
2023-11-05 11:39:04.649 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2a21dc44
2023-11-05 11:39:04.681 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@32ee992
2023-11-05 11:39:04.709 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1384e399
2023-11-05 11:39:04.732 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After adding stats (total=20, active=0, idle=20, waiting=0)
2023-11-05 11:39:12.728 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 11:39:02 CST 2023
2023-11-05 11:39:12.729 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 11:39:12.729 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=20, active=0, idle=20, waiting=0)
2023-11-05 11:39:12.730 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@66d5d431: (connection evicted)
2023-11-05 11:39:12.731 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@bd6450c: (connection evicted)
2023-11-05 11:39:12.732 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2ac4b078: (connection evicted)
2023-11-05 11:39:12.732 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2e8a6e15: (connection evicted)
2023-11-05 11:39:12.732 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@e143942: (connection evicted)
2023-11-05 11:39:12.732 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@400bdd32: (connection evicted)
2023-11-05 11:39:12.732 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1a77bb32: (connection evicted)
2023-11-05 11:39:12.733 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@58c82e4: (connection evicted)
2023-11-05 11:39:12.733 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6e1f160e: (connection evicted)
2023-11-05 11:39:12.733 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7b978072: (connection evicted)
2023-11-05 11:39:12.733 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1fa275c4: (connection evicted)
2023-11-05 11:39:12.734 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2f383354: (connection evicted)
2023-11-05 11:39:12.734 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@22e1c873: (connection evicted)
2023-11-05 11:39:12.734 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@30d23aaa: (connection evicted)
2023-11-05 11:39:12.734 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@47df3c66: (connection evicted)
2023-11-05 11:39:12.735 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@112f3918: (connection evicted)
2023-11-05 11:39:12.735 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1fd40c61: (connection evicted)
2023-11-05 11:39:12.736 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2a21dc44: (connection evicted)
2023-11-05 11:39:12.736 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@32ee992: (connection evicted)
2023-11-05 11:39:12.737 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1384e399: (connection evicted)
2023-11-05 11:39:12.737 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 11:39:12.737 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 11:42:29.133 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 11:42:29.142 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 11:42:29.150 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 11:42:29.151 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:42:29.161 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 11:42:29.162 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 11:42:29.191 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 11:42:29.192 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 11:42:29.226 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 11:42:29.235 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 11:42:29.268 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 11:42:29.269 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 11:42:29.269 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 11:42:29.270 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 11:42:29.349 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 11:42:29.351 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 11:42:29.352 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 11:42:29.357 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 11:42:29.360 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 11:42:29.368 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:42:29.370 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:42:29.370 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:42:29.371 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:42:29.371 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:42:29.374 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:42:29.375 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:42:29.375 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:42:29.375 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:42:29.376 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:42:29.376 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 11:42:29.378 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 11:42:29.379 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 11:42:29.381 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 11:42:29.389 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 11:42:29.394 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 11:42:29.403 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 11:42:29.404 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 11:42:29.405 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 11:42:29.415 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 11:42:29.416 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 11:42:29.418 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:42:29.423 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 11:42:29.423 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 11:42:29.427 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_COMMITTED
2023-11-05 11:42:29.427 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_COMMITTED
2023-11-05 11:42:29.428 [t2] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 11:42:29.431 [t2] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 11:42:29.431 [t2] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 11:42:29.431 [t2] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 11:42:29.432 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 11:42:29.432 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 11:42:29.432 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 11:42:29.432 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 11:42:29.432 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 11:42:29.432 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 11:42:29.432 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 11:42:29.432 [t2] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 11:42:29.432 [t2] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 11:42:29.432 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 11:42:29.433 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 11:42:29.433 [t2] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 11:42:29.433 [t2] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 11:42:29.433 [t2] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 11:42:29.433 [t2] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 11:42:29.433 [t2] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 11:42:29.433 [t2] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 11:42:29.433 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 11:42:29.433 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 11:42:29.433 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 11:42:29.433 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 11:42:29.433 [t2] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 11:42:29.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 11:42:29.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 11:42:29.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 11:42:29.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 11:42:29.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 11:42:29.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 11:42:29.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 11:42:29.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 11:42:29.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 11:42:29.434 [t2] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 11:42:29.434 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 11:42:29.659 [t2] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5466a2
2023-11-05 11:42:29.660 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 11:42:29.664 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@915277221 wrapping com.mysql.cj.jdbc.ConnectionImpl@5466a2] for JDBC transaction
2023-11-05 11:42:29.667 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@915277221 wrapping com.mysql.cj.jdbc.ConnectionImpl@5466a2] to 2
2023-11-05 11:42:29.667 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@915277221 wrapping com.mysql.cj.jdbc.ConnectionImpl@5466a2] to manual commit
2023-11-05 11:42:29.671 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@57da7563
2023-11-05 11:42:29.671 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1246872329 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] for JDBC transaction
2023-11-05 11:42:29.671 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1246872329 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] to 2
2023-11-05 11:42:29.672 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1246872329 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] to manual commit
2023-11-05 11:42:29.694 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@76c88017
2023-11-05 11:42:29.700 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 11:42:29.701 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 11:42:29.724 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@72861a66
2023-11-05 11:42:29.730 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 11:42:29.732 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 11:42:29.732 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 11:42:29.733 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 11:42:29.734 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了3条数据
2023-11-05 11:42:29.756 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6298c70b
2023-11-05 11:42:29.761 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 11:42:29.762 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 11:42:29.785 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7c690ba
2023-11-05 11:42:29.815 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1cc92ea4
2023-11-05 11:42:29.846 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5357c891
2023-11-05 11:42:29.880 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4b06470b
2023-11-05 11:42:29.909 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@20101a72
2023-11-05 11:42:29.939 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@343eba73
2023-11-05 11:42:29.970 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2b0caadf
2023-11-05 11:42:30.001 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7688582b
2023-11-05 11:42:30.033 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@350075b9
2023-11-05 11:42:30.069 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@27e34155
2023-11-05 11:42:30.097 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3d4dcc12
2023-11-05 11:42:30.125 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@32ec59b2
2023-11-05 11:42:30.156 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7594d93c
2023-11-05 11:42:30.188 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@51f13247
2023-11-05 11:42:30.220 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@71038356
2023-11-05 11:42:30.253 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2e6f8057
2023-11-05 11:42:30.281 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@e43c5f8
2023-11-05 11:42:30.682 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 11:42:30.682 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 11:42:30.684 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 11:42:30.684 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 11:42:30.684 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@1246872329 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563]
2023-11-05 11:42:30.690 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1246872329 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] to 4
2023-11-05 11:42:30.691 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1246872329 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] after transaction
2023-11-05 11:42:30.696 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 11:42:34.749 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 11:42:34.749 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 11:42:34.750 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 11:42:34.750 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 11:42:34.750 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 11:42:34.750 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 11:42:34.751 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了4条数据
2023-11-05 11:42:34.751 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction rollback
2023-11-05 11:42:34.751 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Rolling back JDBC transaction on Connection [HikariProxyConnection@915277221 wrapping com.mysql.cj.jdbc.ConnectionImpl@5466a2]
2023-11-05 11:42:34.752 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@915277221 wrapping com.mysql.cj.jdbc.ConnectionImpl@5466a2] to 4
2023-11-05 11:42:34.752 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@915277221 wrapping com.mysql.cj.jdbc.ConnectionImpl@5466a2] after transaction
2023-11-05 11:42:38.503 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 11:42:29 CST 2023
2023-11-05 11:42:38.504 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 11:42:38.504 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=22, active=0, idle=22, waiting=0)
2023-11-05 11:42:38.504 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5466a2: (connection evicted)
2023-11-05 11:42:38.506 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@57da7563: (connection evicted)
2023-11-05 11:42:38.506 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@76c88017: (connection evicted)
2023-11-05 11:42:38.506 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@72861a66: (connection evicted)
2023-11-05 11:42:38.506 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6298c70b: (connection evicted)
2023-11-05 11:42:38.507 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7c690ba: (connection evicted)
2023-11-05 11:42:38.507 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1cc92ea4: (connection evicted)
2023-11-05 11:42:38.507 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5357c891: (connection evicted)
2023-11-05 11:42:38.507 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4b06470b: (connection evicted)
2023-11-05 11:42:38.507 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@20101a72: (connection evicted)
2023-11-05 11:42:38.508 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@343eba73: (connection evicted)
2023-11-05 11:42:38.508 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2b0caadf: (connection evicted)
2023-11-05 11:42:38.508 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7688582b: (connection evicted)
2023-11-05 11:42:38.508 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@350075b9: (connection evicted)
2023-11-05 11:42:38.508 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@27e34155: (connection evicted)
2023-11-05 11:42:38.509 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3d4dcc12: (connection evicted)
2023-11-05 11:42:38.509 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@32ec59b2: (connection evicted)
2023-11-05 11:42:38.509 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7594d93c: (connection evicted)
2023-11-05 11:42:38.509 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@51f13247: (connection evicted)
2023-11-05 11:42:38.510 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@71038356: (connection evicted)
2023-11-05 11:42:38.510 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2e6f8057: (connection evicted)
2023-11-05 11:42:38.510 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@e43c5f8: (connection evicted)
2023-11-05 11:42:38.510 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 11:42:38.510 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 11:46:02.309 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 11:46:02.322 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 11:46:02.331 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 11:46:02.332 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:46:02.340 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 11:46:02.341 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 11:46:02.371 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 11:46:02.371 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 11:46:02.393 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 11:46:02.401 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 11:46:02.430 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 11:46:02.431 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 11:46:02.432 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 11:46:02.432 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 11:46:02.511 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 11:46:02.513 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 11:46:02.515 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 11:46:02.523 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 11:46:02.527 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 11:46:02.536 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:46:02.541 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:46:02.542 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:46:02.542 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:46:02.542 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:46:02.550 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:46:02.552 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:46:02.552 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:46:02.552 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:46:02.553 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:46:02.553 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 11:46:02.556 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 11:46:02.558 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 11:46:02.563 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 11:46:02.577 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 11:46:02.586 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 11:46:02.598 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 11:46:02.599 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 11:46:02.599 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 11:46:02.612 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 11:46:02.613 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 11:46:02.617 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:46:02.622 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 11:46:02.623 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 11:46:02.630 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_COMMITTED
2023-11-05 11:46:02.630 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_COMMITTED
2023-11-05 11:46:02.631 [t2] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 11:46:02.635 [t2] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 11:46:02.635 [t2] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 11:46:02.635 [t2] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 11:46:02.635 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 11:46:02.635 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 11:46:02.635 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 11:46:02.635 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 11:46:02.635 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 11:46:02.635 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 11:46:02.636 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 11:46:02.636 [t2] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 11:46:02.636 [t2] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 11:46:02.636 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 11:46:02.636 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 11:46:02.636 [t2] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 11:46:02.636 [t2] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 11:46:02.636 [t2] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 11:46:02.637 [t2] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 11:46:02.638 [t2] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 11:46:02.638 [t2] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 11:46:02.638 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 11:46:02.638 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 11:46:02.638 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 11:46:02.638 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 11:46:02.638 [t2] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 11:46:02.638 [t2] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 11:46:02.638 [t2] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 11:46:02.638 [t2] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 11:46:02.639 [t2] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 11:46:02.639 [t2] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 11:46:02.639 [t2] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 11:46:02.639 [t2] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 11:46:02.639 [t2] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 11:46:02.639 [t2] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 11:46:02.639 [t2] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 11:46:02.639 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 11:46:02.871 [t2] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@c95000
2023-11-05 11:46:02.873 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 11:46:02.876 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000] for JDBC transaction
2023-11-05 11:46:02.879 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000] to 2
2023-11-05 11:46:02.880 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000] to manual commit
2023-11-05 11:46:02.886 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@57da7563
2023-11-05 11:46:02.886 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1151980456 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] for JDBC transaction
2023-11-05 11:46:02.887 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1151980456 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] to 2
2023-11-05 11:46:02.887 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1151980456 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] to manual commit
2023-11-05 11:46:02.910 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@76c88017
2023-11-05 11:46:02.914 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 11:46:02.915 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 11:46:02.942 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@72861a66
2023-11-05 11:46:02.943 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 11:46:02.946 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 11:46:02.946 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 11:46:02.946 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 11:46:02.949 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了4条数据
2023-11-05 11:46:02.973 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6298c70b
2023-11-05 11:46:02.978 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 11:46:02.979 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 11:46:03.003 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7c690ba
2023-11-05 11:46:03.033 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1cc92ea4
2023-11-05 11:46:03.063 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5357c891
2023-11-05 11:46:03.096 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4b06470b
2023-11-05 11:46:03.126 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@20101a72
2023-11-05 11:46:03.156 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@343eba73
2023-11-05 11:46:03.186 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2b0caadf
2023-11-05 11:46:03.221 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7688582b
2023-11-05 11:46:03.252 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@350075b9
2023-11-05 11:46:03.285 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@27e34155
2023-11-05 11:46:03.315 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3d4dcc12
2023-11-05 11:46:03.344 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@32ec59b2
2023-11-05 11:46:03.375 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7594d93c
2023-11-05 11:46:03.406 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@51f13247
2023-11-05 11:46:03.439 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@71038356
2023-11-05 11:46:03.482 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2e6f8057
2023-11-05 11:46:03.501 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@e43c5f8
2023-11-05 11:46:03.900 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 11:46:03.901 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 11:46:03.902 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 11:46:03.902 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 11:46:03.903 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@1151980456 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563]
2023-11-05 11:46:03.908 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1151980456 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] to 4
2023-11-05 11:46:03.909 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1151980456 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] after transaction
2023-11-05 11:46:03.914 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 11:46:07.957 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 11:46:07.958 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 11:46:07.959 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 11:46:07.959 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 11:46:07.959 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 11:46:07.959 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 11:46:07.960 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了5条数据
2023-11-05 11:46:07.960 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 11:46:07.960 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000]
2023-11-05 11:46:07.960 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000] to 4
2023-11-05 11:46:07.961 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000] after transaction
2023-11-05 11:46:07.962 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 11:46:07.962 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 11:46:07.963 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:46:07.966 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 11:46:07.966 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:46:07.968 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 11:46:02 CST 2023
2023-11-05 11:46:07.968 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 11:46:07.968 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=22, active=0, idle=22, waiting=0)
2023-11-05 11:46:07.969 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@c95000: (connection evicted)
2023-11-05 11:46:07.970 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@57da7563: (connection evicted)
2023-11-05 11:46:07.970 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@76c88017: (connection evicted)
2023-11-05 11:46:07.971 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@72861a66: (connection evicted)
2023-11-05 11:46:07.971 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6298c70b: (connection evicted)
2023-11-05 11:46:07.971 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7c690ba: (connection evicted)
2023-11-05 11:46:07.971 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1cc92ea4: (connection evicted)
2023-11-05 11:46:07.972 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5357c891: (connection evicted)
2023-11-05 11:46:07.972 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4b06470b: (connection evicted)
2023-11-05 11:46:07.972 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@20101a72: (connection evicted)
2023-11-05 11:46:07.972 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@343eba73: (connection evicted)
2023-11-05 11:46:07.973 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2b0caadf: (connection evicted)
2023-11-05 11:46:07.973 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7688582b: (connection evicted)
2023-11-05 11:46:07.973 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@350075b9: (connection evicted)
2023-11-05 11:46:07.974 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@27e34155: (connection evicted)
2023-11-05 11:46:07.974 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3d4dcc12: (connection evicted)
2023-11-05 11:46:07.974 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@32ec59b2: (connection evicted)
2023-11-05 11:46:07.975 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7594d93c: (connection evicted)
2023-11-05 11:46:07.975 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@51f13247: (connection evicted)
2023-11-05 11:46:07.975 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@71038356: (connection evicted)
2023-11-05 11:46:07.975 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2e6f8057: (connection evicted)
2023-11-05 11:46:07.976 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@e43c5f8: (connection evicted)
2023-11-05 11:46:07.976 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 11:46:07.976 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 11:50:49.574 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 11:50:49.586 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 11:50:49.594 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 11:50:49.596 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:50:49.605 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 11:50:49.606 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 11:50:49.631 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 11:50:49.632 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 11:50:49.655 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 11:50:49.662 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 11:50:49.697 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 11:50:49.698 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 11:50:49.698 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 11:50:49.699 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 11:50:49.781 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 11:50:49.783 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 11:50:49.785 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 11:50:49.789 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 11:50:49.792 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 11:50:49.797 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:50:49.799 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:50:49.799 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:50:49.800 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:50:49.800 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:50:49.802 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:50:49.803 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:50:49.803 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:50:49.803 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:50:49.804 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 11:50:49.804 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 11:50:49.806 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 11:50:49.807 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 11:50:49.809 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 11:50:49.817 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 11:50:49.822 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 11:50:49.829 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 11:50:49.829 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 11:50:49.831 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 11:50:49.841 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 11:50:49.843 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 11:50:49.846 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:50:49.849 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 11:50:49.850 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 11:50:49.856 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_REPEATABLE_READ
2023-11-05 11:50:49.855 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_REPEATABLE_READ
2023-11-05 11:50:49.856 [t2] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 11:50:49.859 [t2] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 11:50:49.859 [t2] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 11:50:49.859 [t2] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 11:50:49.859 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 11:50:49.859 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 11:50:49.860 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 11:50:49.860 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 11:50:49.860 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 11:50:49.860 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 11:50:49.860 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 11:50:49.860 [t2] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 11:50:49.860 [t2] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 11:50:49.860 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 11:50:49.860 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 11:50:49.860 [t2] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 11:50:49.860 [t2] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 11:50:49.860 [t2] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 11:50:49.860 [t2] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 11:50:49.860 [t2] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 11:50:49.861 [t2] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 11:50:49.861 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 11:50:49.861 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 11:50:49.861 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 11:50:49.861 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 11:50:49.861 [t2] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 11:50:49.861 [t2] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 11:50:49.861 [t2] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 11:50:49.861 [t2] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 11:50:49.861 [t2] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 11:50:49.861 [t2] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 11:50:49.861 [t2] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 11:50:49.862 [t2] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 11:50:49.862 [t2] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 11:50:49.862 [t2] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 11:50:49.862 [t2] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 11:50:49.862 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 11:50:50.112 [t2] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5466a2
2023-11-05 11:50:50.113 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 11:50:50.117 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@915277221 wrapping com.mysql.cj.jdbc.ConnectionImpl@5466a2] for JDBC transaction
2023-11-05 11:50:50.120 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@915277221 wrapping com.mysql.cj.jdbc.ConnectionImpl@5466a2] to 4
2023-11-05 11:50:50.121 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@915277221 wrapping com.mysql.cj.jdbc.ConnectionImpl@5466a2] to manual commit
2023-11-05 11:50:50.125 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@57da7563
2023-11-05 11:50:50.125 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1246872329 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] for JDBC transaction
2023-11-05 11:50:50.125 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1246872329 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] to 4
2023-11-05 11:50:50.125 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1246872329 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] to manual commit
2023-11-05 11:50:50.151 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 11:50:50.151 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 11:50:50.154 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@76c88017
2023-11-05 11:50:50.175 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 11:50:50.181 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 11:50:50.181 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 11:50:50.182 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 11:50:50.186 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@72861a66
2023-11-05 11:50:50.186 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了5条数据
2023-11-05 11:50:50.215 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6298c70b
2023-11-05 11:50:50.221 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 11:50:50.222 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 11:50:50.245 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7c690ba
2023-11-05 11:50:50.276 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1cc92ea4
2023-11-05 11:50:50.309 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5357c891
2023-11-05 11:50:50.340 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4b06470b
2023-11-05 11:50:50.371 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@20101a72
2023-11-05 11:50:50.402 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@343eba73
2023-11-05 11:50:50.433 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2b0caadf
2023-11-05 11:50:50.464 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7688582b
2023-11-05 11:50:50.497 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@350075b9
2023-11-05 11:50:50.527 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@27e34155
2023-11-05 11:50:50.560 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3d4dcc12
2023-11-05 11:50:50.589 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@32ec59b2
2023-11-05 11:50:50.619 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7594d93c
2023-11-05 11:50:50.650 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@51f13247
2023-11-05 11:50:50.688 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@71038356
2023-11-05 11:50:50.712 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2e6f8057
2023-11-05 11:50:50.742 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@e43c5f8
2023-11-05 11:50:51.139 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 11:50:51.141 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 11:50:51.143 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 11:50:51.144 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 11:50:51.145 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@1246872329 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563]
2023-11-05 11:50:51.162 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1246872329 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] after transaction
2023-11-05 11:50:51.168 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 11:50:55.197 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 11:50:55.198 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 11:50:55.199 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 11:50:55.199 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 11:50:55.199 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 11:50:55.199 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 11:50:55.201 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了5条数据
2023-11-05 11:50:55.202 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 11:50:55.202 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@915277221 wrapping com.mysql.cj.jdbc.ConnectionImpl@5466a2]
2023-11-05 11:50:55.202 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@915277221 wrapping com.mysql.cj.jdbc.ConnectionImpl@5466a2] after transaction
2023-11-05 11:50:55.203 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 11:50:55.204 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 11:50:55.204 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:50:55.207 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 11:50:55.207 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 11:50:55.209 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 11:50:49 CST 2023
2023-11-05 11:50:55.210 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 11:50:55.210 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=22, active=0, idle=22, waiting=0)
2023-11-05 11:50:55.211 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5466a2: (connection evicted)
2023-11-05 11:50:55.211 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@57da7563: (connection evicted)
2023-11-05 11:50:55.212 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@76c88017: (connection evicted)
2023-11-05 11:50:55.212 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@72861a66: (connection evicted)
2023-11-05 11:50:55.212 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6298c70b: (connection evicted)
2023-11-05 11:50:55.212 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7c690ba: (connection evicted)
2023-11-05 11:50:55.213 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1cc92ea4: (connection evicted)
2023-11-05 11:50:55.213 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5357c891: (connection evicted)
2023-11-05 11:50:55.213 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4b06470b: (connection evicted)
2023-11-05 11:50:55.214 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@20101a72: (connection evicted)
2023-11-05 11:50:55.214 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@343eba73: (connection evicted)
2023-11-05 11:50:55.214 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2b0caadf: (connection evicted)
2023-11-05 11:50:55.215 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7688582b: (connection evicted)
2023-11-05 11:50:55.215 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@350075b9: (connection evicted)
2023-11-05 11:50:55.216 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@27e34155: (connection evicted)
2023-11-05 11:50:55.216 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3d4dcc12: (connection evicted)
2023-11-05 11:50:55.216 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@32ec59b2: (connection evicted)
2023-11-05 11:50:55.217 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7594d93c: (connection evicted)
2023-11-05 11:50:55.217 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@51f13247: (connection evicted)
2023-11-05 11:50:55.217 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@71038356: (connection evicted)
2023-11-05 11:50:55.217 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2e6f8057: (connection evicted)
2023-11-05 11:50:55.218 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@e43c5f8: (connection evicted)
2023-11-05 11:50:55.218 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 11:50:55.218 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 12:01:15.714 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 12:01:15.723 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 12:01:15.732 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 12:01:15.733 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:01:15.741 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:01:15.741 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:01:15.774 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 12:01:15.774 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 12:01:15.798 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 12:01:15.804 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 12:01:15.834 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 12:01:15.835 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 12:01:15.836 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 12:01:15.837 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 12:01:15.914 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 12:01:15.918 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 12:01:15.919 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 12:01:15.928 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 12:01:15.931 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 12:01:15.942 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:01:15.947 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:01:15.947 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:01:15.948 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:01:15.948 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:01:15.957 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:01:15.958 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:01:15.958 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:01:15.959 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:01:15.959 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:01:15.959 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 12:01:15.962 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 12:01:15.964 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 12:01:15.968 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 12:01:15.983 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 12:01:15.994 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 12:01:16.004 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 12:01:16.005 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 12:01:16.006 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 12:01:16.019 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 12:01:16.021 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 12:01:16.026 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:01:16.032 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 12:01:16.032 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 12:01:16.039 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_COMMITTED
2023-11-05 12:01:16.039 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_COMMITTED
2023-11-05 12:01:16.041 [t2] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 12:01:16.044 [t2] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 12:01:16.045 [t2] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 12:01:16.045 [t2] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 12:01:16.045 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 12:01:16.045 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 12:01:16.045 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 12:01:16.045 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 12:01:16.045 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 12:01:16.045 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 12:01:16.045 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 12:01:16.046 [t2] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 12:01:16.046 [t2] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 12:01:16.046 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 12:01:16.046 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 12:01:16.046 [t2] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 12:01:16.046 [t2] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 12:01:16.046 [t2] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 12:01:16.046 [t2] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 12:01:16.046 [t2] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 12:01:16.046 [t2] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 12:01:16.047 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 12:01:16.047 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 12:01:16.047 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 12:01:16.047 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 12:01:16.047 [t2] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 12:01:16.047 [t2] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 12:01:16.047 [t2] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 12:01:16.047 [t2] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 12:01:16.047 [t2] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 12:01:16.047 [t2] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 12:01:16.047 [t2] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 12:01:16.048 [t2] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 12:01:16.048 [t2] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 12:01:16.048 [t2] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 12:01:16.048 [t2] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 12:01:16.048 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 12:01:16.293 [t2] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4d3a1822
2023-11-05 12:01:16.295 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 12:01:16.298 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@934080625 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d3a1822] for JDBC transaction
2023-11-05 12:01:16.302 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@934080625 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d3a1822] to 2
2023-11-05 12:01:16.304 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@934080625 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d3a1822] to manual commit
2023-11-05 12:01:16.308 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@57da7563
2023-11-05 12:01:16.308 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1566041551 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] for JDBC transaction
2023-11-05 12:01:16.308 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1566041551 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] to 2
2023-11-05 12:01:16.308 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1566041551 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] to manual commit
2023-11-05 12:01:16.335 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@76c88017
2023-11-05 12:01:16.336 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:01:16.337 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:01:16.359 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:01:16.363 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:01:16.365 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:01:16.366 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:01:16.369 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@72861a66
2023-11-05 12:01:16.369 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了6条数据
2023-11-05 12:01:16.396 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6298c70b
2023-11-05 12:01:16.403 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 12:01:16.403 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 12:01:16.426 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7c690ba
2023-11-05 12:01:16.457 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1cc92ea4
2023-11-05 12:01:16.488 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5357c891
2023-11-05 12:01:16.522 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4b06470b
2023-11-05 12:01:16.552 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@20101a72
2023-11-05 12:01:16.583 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@343eba73
2023-11-05 12:01:16.614 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2b0caadf
2023-11-05 12:01:16.645 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7688582b
2023-11-05 12:01:16.681 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@350075b9
2023-11-05 12:01:16.708 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@27e34155
2023-11-05 12:01:16.742 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3d4dcc12
2023-11-05 12:01:16.771 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@32ec59b2
2023-11-05 12:01:16.802 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7594d93c
2023-11-05 12:01:16.836 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@51f13247
2023-11-05 12:01:16.865 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@71038356
2023-11-05 12:01:16.896 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2e6f8057
2023-11-05 12:01:16.926 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@e43c5f8
2023-11-05 12:01:17.323 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 12:01:17.324 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 12:01:17.327 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 12:01:17.327 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 12:01:17.327 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@1566041551 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563]
2023-11-05 12:01:17.334 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1566041551 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] to 4
2023-11-05 12:01:17.335 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1566041551 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] after transaction
2023-11-05 12:01:17.340 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 12:01:18.376 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:01:18.377 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:01:18.379 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:01:18.381 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:01:18.382 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:01:18.383 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:01:18.388 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了7条数据
2023-11-05 12:01:18.388 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction rollback
2023-11-05 12:01:18.389 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Rolling back JDBC transaction on Connection [HikariProxyConnection@934080625 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d3a1822]
2023-11-05 12:01:18.389 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@934080625 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d3a1822] to 4
2023-11-05 12:01:18.390 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@934080625 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d3a1822] after transaction
2023-11-05 12:01:18.391 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 12:01:18.392 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 12:01:18.392 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:01:18.395 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 12:01:18.396 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:01:18.397 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 12:01:15 CST 2023
2023-11-05 12:01:18.398 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 12:01:18.398 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=22, active=0, idle=22, waiting=0)
2023-11-05 12:01:18.398 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4d3a1822: (connection evicted)
2023-11-05 12:01:18.399 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@57da7563: (connection evicted)
2023-11-05 12:01:18.399 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@76c88017: (connection evicted)
2023-11-05 12:01:18.401 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@72861a66: (connection evicted)
2023-11-05 12:01:18.401 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6298c70b: (connection evicted)
2023-11-05 12:01:18.401 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7c690ba: (connection evicted)
2023-11-05 12:01:18.401 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1cc92ea4: (connection evicted)
2023-11-05 12:01:18.402 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5357c891: (connection evicted)
2023-11-05 12:01:18.402 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4b06470b: (connection evicted)
2023-11-05 12:01:18.402 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@20101a72: (connection evicted)
2023-11-05 12:01:18.402 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@343eba73: (connection evicted)
2023-11-05 12:01:18.403 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2b0caadf: (connection evicted)
2023-11-05 12:01:18.403 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7688582b: (connection evicted)
2023-11-05 12:01:18.403 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@350075b9: (connection evicted)
2023-11-05 12:01:18.403 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@27e34155: (connection evicted)
2023-11-05 12:01:18.404 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3d4dcc12: (connection evicted)
2023-11-05 12:01:18.404 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@32ec59b2: (connection evicted)
2023-11-05 12:01:18.404 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7594d93c: (connection evicted)
2023-11-05 12:01:18.404 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@51f13247: (connection evicted)
2023-11-05 12:01:18.405 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@71038356: (connection evicted)
2023-11-05 12:01:18.405 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2e6f8057: (connection evicted)
2023-11-05 12:01:18.405 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@e43c5f8: (connection evicted)
2023-11-05 12:01:18.405 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 12:01:18.405 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 12:08:48.695 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [DrityReadTest]: []
2023-11-05 12:08:48.704 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 12:08:48.713 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [DrityReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 12:08:48.714 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [DrityReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:08:48.722 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.DrityReadTest
2023-11-05 12:08:48.723 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.DrityReadTest
2023-11-05 12:08:48.753 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 12:08:48.753 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 12:08:48.778 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 12:08:48.785 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 12:08:48.822 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 12:08:48.823 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 12:08:48.824 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 12:08:48.824 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 12:08:48.912 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 12:08:48.916 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 12:08:48.917 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 12:08:48.922 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 12:08:48.924 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 12:08:48.930 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:08:48.934 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:08:48.934 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:08:48.934 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:08:48.934 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:08:48.938 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:08:48.939 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:08:48.939 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:08:48.939 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:08:48.939 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:08:48.940 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 12:08:48.942 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 12:08:48.943 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 12:08:48.945 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 12:08:48.954 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 12:08:48.960 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 12:08:48.968 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 12:08:48.969 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 12:08:48.969 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 12:08:48.980 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 12:08:48.981 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 12:08:48.985 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [DrityReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:08:48.989 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 12:08:48.989 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 12:08:49.008 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing SQL query [SELECT * FROM posts]
2023-11-05 12:08:49.010 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 12:08:49.010 [t2] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 12:08:49.014 [t2] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 12:08:49.014 [t2] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 12:08:49.014 [t2] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 12:08:49.014 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 12:08:49.014 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 12:08:49.014 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 12:08:49.014 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 12:08:49.014 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 12:08:49.014 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 12:08:49.015 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 12:08:49.015 [t2] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 12:08:49.015 [t2] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 12:08:49.015 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 12:08:49.015 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 12:08:49.015 [t2] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 12:08:49.015 [t2] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 12:08:49.015 [t2] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 12:08:49.015 [t2] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 12:08:49.015 [t2] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 12:08:49.015 [t2] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 12:08:49.015 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 12:08:49.016 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 12:08:49.016 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 12:08:49.016 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 12:08:49.016 [t2] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 12:08:49.016 [t2] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 12:08:49.016 [t2] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 12:08:49.016 [t2] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 12:08:49.016 [t2] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 12:08:49.016 [t2] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 12:08:49.016 [t2] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 12:08:49.016 [t2] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 12:08:49.016 [t2] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 12:08:49.016 [t2] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 12:08:49.017 [t2] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 12:08:49.017 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 12:08:49.241 [t2] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5f4a53c5
2023-11-05 12:08:49.242 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 12:08:49.262 [t2] INFO  com.zhouyf.service.impl.BlogServiceDirtyRead - t2线程查询到了0条数据
2023-11-05 12:08:49.353 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 12:08:49.354 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 12:08:49.372 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@11ed66ef
2023-11-05 12:08:49.395 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@30ff939b
2023-11-05 12:08:49.427 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@34b14fcd
2023-11-05 12:08:49.459 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@216ab0b0
2023-11-05 12:08:49.488 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@144e8f26
2023-11-05 12:08:49.519 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@16cdf4e1
2023-11-05 12:08:49.550 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@51c75841
2023-11-05 12:08:49.580 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@34f5b595
2023-11-05 12:08:49.614 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4cc2ce5e
2023-11-05 12:08:49.642 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@35b3c1a
2023-11-05 12:08:49.679 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1aa3a46d
2023-11-05 12:08:49.706 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5f440ea3
2023-11-05 12:08:49.736 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3c4431f8
2023-11-05 12:08:49.769 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@52020d34
2023-11-05 12:08:49.804 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@b7f87af
2023-11-05 12:08:49.830 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3555c049
2023-11-05 12:08:49.868 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5cdb5911
2023-11-05 12:08:49.893 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6d010bdc
2023-11-05 12:08:49.925 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@37afa426
2023-11-05 12:08:49.948 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After adding stats (total=20, active=0, idle=20, waiting=0)
2023-11-05 12:08:49.996 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 12:08:49.997 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 12:08:49.997 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 12:08:50.024 [t1] INFO  com.zhouyf.service.impl.BlogServiceDirtyRead - t1线程插入数据成功
2023-11-05 12:08:51.263 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing SQL query [SELECT * FROM posts]
2023-11-05 12:08:51.264 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 12:08:51.273 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:08:51.276 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:08:51.277 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:08:51.277 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:08:51.278 [t2] INFO  com.zhouyf.service.impl.BlogServiceDirtyRead - t2线程查询到了1条数据
2023-11-05 12:08:55.025 [t1] INFO  com.zhouyf.service.impl.BlogServiceDirtyRead - t1线程事务提交成功
2023-11-05 12:08:55.029 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 12:08:55.030 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 12:08:55.030 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [DrityReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:08:55.034 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 12:08:55.035 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [DrityReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:08:55.037 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 12:08:48 CST 2023
2023-11-05 12:08:55.037 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 12:08:55.037 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=20, active=0, idle=20, waiting=0)
2023-11-05 12:08:55.038 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5f4a53c5: (connection evicted)
2023-11-05 12:08:55.039 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@11ed66ef: (connection evicted)
2023-11-05 12:08:55.040 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@30ff939b: (connection evicted)
2023-11-05 12:08:55.040 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@34b14fcd: (connection evicted)
2023-11-05 12:08:55.040 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@216ab0b0: (connection evicted)
2023-11-05 12:08:55.040 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@144e8f26: (connection evicted)
2023-11-05 12:08:55.042 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@16cdf4e1: (connection evicted)
2023-11-05 12:08:55.042 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@51c75841: (connection evicted)
2023-11-05 12:08:55.042 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@34f5b595: (connection evicted)
2023-11-05 12:08:55.043 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4cc2ce5e: (connection evicted)
2023-11-05 12:08:55.043 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@35b3c1a: (connection evicted)
2023-11-05 12:08:55.043 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1aa3a46d: (connection evicted)
2023-11-05 12:08:55.043 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5f440ea3: (connection evicted)
2023-11-05 12:08:55.044 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3c4431f8: (connection evicted)
2023-11-05 12:08:55.044 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@52020d34: (connection evicted)
2023-11-05 12:08:55.044 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@b7f87af: (connection evicted)
2023-11-05 12:08:55.044 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3555c049: (connection evicted)
2023-11-05 12:08:55.045 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5cdb5911: (connection evicted)
2023-11-05 12:08:55.045 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6d010bdc: (connection evicted)
2023-11-05 12:08:55.045 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@37afa426: (connection evicted)
2023-11-05 12:08:55.045 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 12:08:55.045 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 12:10:42.748 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 12:10:42.757 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 12:10:42.765 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 12:10:42.766 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:10:42.775 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:10:42.775 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:10:42.800 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 12:10:42.801 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 12:10:42.821 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 12:10:42.828 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 12:10:42.858 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 12:10:42.859 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 12:10:42.859 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 12:10:42.860 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 12:10:42.937 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 12:10:42.941 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 12:10:42.942 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 12:10:42.950 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 12:10:42.954 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 12:10:42.963 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:10:42.967 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:10:42.968 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:10:42.968 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:10:42.968 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:10:42.975 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:10:42.977 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:10:42.977 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:10:42.978 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:10:42.978 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:10:42.978 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 12:10:42.981 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 12:10:42.982 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 12:10:42.987 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 12:10:42.999 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 12:10:43.009 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 12:10:43.019 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 12:10:43.020 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 12:10:43.021 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 12:10:43.034 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 12:10:43.035 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 12:10:43.040 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:10:43.044 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 12:10:43.045 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 12:10:43.051 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_COMMITTED
2023-11-05 12:10:43.051 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_COMMITTED
2023-11-05 12:10:43.052 [t1] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 12:10:43.056 [t1] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 12:10:43.056 [t1] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 12:10:43.056 [t1] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 12:10:43.056 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 12:10:43.057 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 12:10:43.057 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 12:10:43.057 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 12:10:43.057 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 12:10:43.057 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 12:10:43.057 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 12:10:43.057 [t1] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 12:10:43.057 [t1] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 12:10:43.058 [t1] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 12:10:43.058 [t1] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 12:10:43.058 [t1] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 12:10:43.058 [t1] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 12:10:43.058 [t1] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 12:10:43.058 [t1] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 12:10:43.058 [t1] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 12:10:43.058 [t1] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 12:10:43.058 [t1] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 12:10:43.058 [t1] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 12:10:43.058 [t1] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 12:10:43.058 [t1] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 12:10:43.058 [t1] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 12:10:43.059 [t1] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 12:10:43.059 [t1] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 12:10:43.059 [t1] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 12:10:43.059 [t1] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 12:10:43.059 [t1] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 12:10:43.059 [t1] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 12:10:43.059 [t1] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 12:10:43.059 [t1] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 12:10:43.059 [t1] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 12:10:43.059 [t1] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 12:10:43.059 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 12:10:43.299 [t1] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@24899b25
2023-11-05 12:10:43.300 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 12:10:43.304 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1647324713 wrapping com.mysql.cj.jdbc.ConnectionImpl@24899b25] for JDBC transaction
2023-11-05 12:10:43.306 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1647324713 wrapping com.mysql.cj.jdbc.ConnectionImpl@24899b25] to 2
2023-11-05 12:10:43.309 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1647324713 wrapping com.mysql.cj.jdbc.ConnectionImpl@24899b25] to manual commit
2023-11-05 12:10:43.312 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@57da7563
2023-11-05 12:10:43.312 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@98491749 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] for JDBC transaction
2023-11-05 12:10:43.312 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@98491749 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] to 2
2023-11-05 12:10:43.313 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@98491749 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] to manual commit
2023-11-05 12:10:43.333 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@76c88017
2023-11-05 12:10:43.344 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:10:43.344 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:10:43.365 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@72861a66
2023-11-05 12:10:43.374 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:10:43.377 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:10:43.378 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:10:43.378 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:10:43.379 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了1条数据
2023-11-05 12:10:43.395 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6298c70b
2023-11-05 12:10:43.417 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 12:10:43.418 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 12:10:43.425 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7c690ba
2023-11-05 12:10:43.456 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1cc92ea4
2023-11-05 12:10:43.489 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5357c891
2023-11-05 12:10:43.520 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4b06470b
2023-11-05 12:10:43.551 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@20101a72
2023-11-05 12:10:43.582 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@343eba73
2023-11-05 12:10:43.614 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2b0caadf
2023-11-05 12:10:43.644 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7688582b
2023-11-05 12:10:43.680 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@350075b9
2023-11-05 12:10:43.710 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@27e34155
2023-11-05 12:10:43.739 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3d4dcc12
2023-11-05 12:10:43.768 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@32ec59b2
2023-11-05 12:10:43.798 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7594d93c
2023-11-05 12:10:43.828 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@51f13247
2023-11-05 12:10:43.860 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@71038356
2023-11-05 12:10:43.894 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2e6f8057
2023-11-05 12:10:43.920 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@e43c5f8
2023-11-05 12:10:44.323 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 12:10:44.324 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 12:10:44.326 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 12:10:44.326 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 12:10:44.326 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@1647324713 wrapping com.mysql.cj.jdbc.ConnectionImpl@24899b25]
2023-11-05 12:10:44.335 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1647324713 wrapping com.mysql.cj.jdbc.ConnectionImpl@24899b25] to 4
2023-11-05 12:10:44.336 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1647324713 wrapping com.mysql.cj.jdbc.ConnectionImpl@24899b25] after transaction
2023-11-05 12:10:44.342 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 12:10:45.381 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:10:45.382 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:10:45.384 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:10:45.384 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:10:45.385 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:10:45.385 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:10:45.385 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了2条数据
2023-11-05 12:10:45.386 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction rollback
2023-11-05 12:10:45.386 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Rolling back JDBC transaction on Connection [HikariProxyConnection@98491749 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563]
2023-11-05 12:10:45.387 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@98491749 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] to 4
2023-11-05 12:10:45.388 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@98491749 wrapping com.mysql.cj.jdbc.ConnectionImpl@57da7563] after transaction
2023-11-05 12:10:45.389 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 12:10:45.390 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 12:10:45.390 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:10:45.393 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 12:10:45.393 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:10:45.396 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 12:10:42 CST 2023
2023-11-05 12:10:45.396 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 12:10:45.396 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=22, active=0, idle=22, waiting=0)
2023-11-05 12:10:45.398 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@24899b25: (connection evicted)
2023-11-05 12:10:45.399 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@57da7563: (connection evicted)
2023-11-05 12:10:45.399 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@76c88017: (connection evicted)
2023-11-05 12:10:45.399 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@72861a66: (connection evicted)
2023-11-05 12:10:45.400 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6298c70b: (connection evicted)
2023-11-05 12:10:45.400 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7c690ba: (connection evicted)
2023-11-05 12:10:45.400 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1cc92ea4: (connection evicted)
2023-11-05 12:10:45.400 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5357c891: (connection evicted)
2023-11-05 12:10:45.401 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4b06470b: (connection evicted)
2023-11-05 12:10:45.401 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@20101a72: (connection evicted)
2023-11-05 12:10:45.401 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@343eba73: (connection evicted)
2023-11-05 12:10:45.402 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2b0caadf: (connection evicted)
2023-11-05 12:10:45.402 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7688582b: (connection evicted)
2023-11-05 12:10:45.403 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@350075b9: (connection evicted)
2023-11-05 12:10:45.403 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@27e34155: (connection evicted)
2023-11-05 12:10:45.403 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3d4dcc12: (connection evicted)
2023-11-05 12:10:45.403 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@32ec59b2: (connection evicted)
2023-11-05 12:10:45.404 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7594d93c: (connection evicted)
2023-11-05 12:10:45.404 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@51f13247: (connection evicted)
2023-11-05 12:10:45.404 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@71038356: (connection evicted)
2023-11-05 12:10:45.405 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2e6f8057: (connection evicted)
2023-11-05 12:10:45.405 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@e43c5f8: (connection evicted)
2023-11-05 12:10:45.406 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 12:10:45.406 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 12:14:44.762 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 12:14:44.772 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 12:14:44.781 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 12:14:44.782 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:14:44.792 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:14:44.793 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:14:44.821 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 12:14:44.822 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 12:14:44.848 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 12:14:44.862 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 12:14:44.896 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 12:14:44.897 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 12:14:44.898 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 12:14:44.898 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 12:14:44.987 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 12:14:44.990 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 12:14:44.991 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 12:14:44.996 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 12:14:44.999 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 12:14:45.004 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:14:45.006 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:14:45.007 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:14:45.007 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:14:45.007 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:14:45.011 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:14:45.011 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:14:45.012 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:14:45.012 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:14:45.012 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:14:45.013 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 12:14:45.015 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 12:14:45.016 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 12:14:45.018 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 12:14:45.026 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 12:14:45.033 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 12:14:45.041 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 12:14:45.043 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 12:14:45.044 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 12:14:45.055 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 12:14:45.056 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 12:14:45.059 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:14:45.063 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 12:14:45.064 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 12:14:45.069 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_COMMITTED
2023-11-05 12:14:45.069 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_COMMITTED
2023-11-05 12:14:45.069 [t2] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 12:14:45.074 [t2] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 12:14:45.074 [t2] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 12:14:45.074 [t2] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 12:14:45.074 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 12:14:45.074 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 12:14:45.074 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 12:14:45.074 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 12:14:45.074 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 12:14:45.074 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 12:14:45.074 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 12:14:45.075 [t2] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 12:14:45.075 [t2] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 12:14:45.075 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 12:14:45.075 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 12:14:45.075 [t2] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 12:14:45.075 [t2] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 12:14:45.075 [t2] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 12:14:45.075 [t2] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 12:14:45.075 [t2] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 12:14:45.075 [t2] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 12:14:45.076 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 12:14:45.076 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 12:14:45.076 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 12:14:45.076 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 12:14:45.076 [t2] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 12:14:45.076 [t2] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 12:14:45.076 [t2] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 12:14:45.076 [t2] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 12:14:45.076 [t2] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 12:14:45.076 [t2] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 12:14:45.076 [t2] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 12:14:45.076 [t2] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 12:14:45.076 [t2] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 12:14:45.076 [t2] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 12:14:45.076 [t2] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 12:14:45.077 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 12:14:45.310 [t2] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@49dd679f
2023-11-05 12:14:45.311 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 12:14:45.314 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1338171798 wrapping com.mysql.cj.jdbc.ConnectionImpl@49dd679f] for JDBC transaction
2023-11-05 12:14:45.317 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1338171798 wrapping com.mysql.cj.jdbc.ConnectionImpl@49dd679f] to 2
2023-11-05 12:14:45.318 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1338171798 wrapping com.mysql.cj.jdbc.ConnectionImpl@49dd679f] to manual commit
2023-11-05 12:14:45.319 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程开启事务
2023-11-05 12:14:45.323 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd
2023-11-05 12:14:45.323 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1848554019 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] for JDBC transaction
2023-11-05 12:14:45.323 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1848554019 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to 2
2023-11-05 12:14:45.324 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1848554019 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to manual commit
2023-11-05 12:14:45.324 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程开启事务
2023-11-05 12:14:45.345 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1a4cdac9
2023-11-05 12:14:45.353 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:14:45.354 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:14:45.377 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1e02a434
2023-11-05 12:14:45.383 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:14:45.385 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:14:45.386 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:14:45.386 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:14:45.387 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了2条数据
2023-11-05 12:14:45.408 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@a33cdb5
2023-11-05 12:14:45.415 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 12:14:45.416 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 12:14:45.439 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4639bf6a
2023-11-05 12:14:45.470 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6647e214
2023-11-05 12:14:45.502 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2bb2c70b
2023-11-05 12:14:45.534 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@28f925f
2023-11-05 12:14:45.566 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2eb58a01
2023-11-05 12:14:45.597 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@12e1d661
2023-11-05 12:14:45.628 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@176c69df
2023-11-05 12:14:45.659 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@23e56051
2023-11-05 12:14:45.694 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@63506d26
2023-11-05 12:14:45.726 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@14abfc15
2023-11-05 12:14:45.758 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@65360e16
2023-11-05 12:14:45.786 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@72520436
2023-11-05 12:14:45.815 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3a18a6c6
2023-11-05 12:14:45.848 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@75cf1f92
2023-11-05 12:14:45.882 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3fbc1dd2
2023-11-05 12:14:45.915 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@536a361b
2023-11-05 12:14:45.939 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@21cbb8ab
2023-11-05 12:14:46.327 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 12:14:46.328 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 12:14:46.331 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 12:14:46.331 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 12:14:46.331 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@1848554019 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd]
2023-11-05 12:14:46.339 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1848554019 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to 4
2023-11-05 12:14:46.341 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1848554019 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] after transaction
2023-11-05 12:14:46.347 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 12:14:47.398 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:14:47.398 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:14:47.401 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:14:47.401 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:14:47.402 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:14:47.402 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:14:47.403 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了3条数据
2023-11-05 12:14:47.404 [t2] WARN  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程出现了幻读
2023-11-05 12:14:47.404 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction rollback
2023-11-05 12:14:47.404 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Rolling back JDBC transaction on Connection [HikariProxyConnection@1338171798 wrapping com.mysql.cj.jdbc.ConnectionImpl@49dd679f]
2023-11-05 12:14:47.405 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1338171798 wrapping com.mysql.cj.jdbc.ConnectionImpl@49dd679f] to 4
2023-11-05 12:14:47.406 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1338171798 wrapping com.mysql.cj.jdbc.ConnectionImpl@49dd679f] after transaction
2023-11-05 12:14:47.415 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 12:14:47.416 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 12:14:47.416 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:14:47.418 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 12:14:47.419 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:14:47.420 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 12:14:44 CST 2023
2023-11-05 12:14:47.420 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 12:14:47.420 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=22, active=0, idle=22, waiting=0)
2023-11-05 12:14:47.421 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@49dd679f: (connection evicted)
2023-11-05 12:14:47.422 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd: (connection evicted)
2023-11-05 12:14:47.423 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1a4cdac9: (connection evicted)
2023-11-05 12:14:47.423 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1e02a434: (connection evicted)
2023-11-05 12:14:47.423 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@a33cdb5: (connection evicted)
2023-11-05 12:14:47.423 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4639bf6a: (connection evicted)
2023-11-05 12:14:47.423 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6647e214: (connection evicted)
2023-11-05 12:14:47.423 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2bb2c70b: (connection evicted)
2023-11-05 12:14:47.424 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@28f925f: (connection evicted)
2023-11-05 12:14:47.424 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2eb58a01: (connection evicted)
2023-11-05 12:14:47.424 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@12e1d661: (connection evicted)
2023-11-05 12:14:47.424 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@176c69df: (connection evicted)
2023-11-05 12:14:47.424 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@23e56051: (connection evicted)
2023-11-05 12:14:47.425 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@63506d26: (connection evicted)
2023-11-05 12:14:47.425 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@14abfc15: (connection evicted)
2023-11-05 12:14:47.425 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@65360e16: (connection evicted)
2023-11-05 12:14:47.425 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@72520436: (connection evicted)
2023-11-05 12:14:47.425 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3a18a6c6: (connection evicted)
2023-11-05 12:14:47.426 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@75cf1f92: (connection evicted)
2023-11-05 12:14:47.426 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3fbc1dd2: (connection evicted)
2023-11-05 12:14:47.426 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@536a361b: (connection evicted)
2023-11-05 12:14:47.426 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@21cbb8ab: (connection evicted)
2023-11-05 12:14:47.426 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 12:14:47.426 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 12:16:52.529 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 12:16:52.537 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 12:16:52.547 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 12:16:52.549 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:16:52.557 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:16:52.558 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:16:52.584 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 12:16:52.585 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 12:16:52.610 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 12:16:52.618 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 12:16:52.651 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 12:16:52.652 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 12:16:52.652 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 12:16:52.653 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 12:16:52.728 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 12:16:52.730 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 12:16:52.732 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 12:16:52.739 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 12:16:52.742 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 12:16:52.753 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:16:52.757 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:16:52.757 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:16:52.757 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:16:52.757 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:16:52.766 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:16:52.767 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:16:52.768 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:16:52.768 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:16:52.768 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:16:52.769 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 12:16:52.771 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 12:16:52.773 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 12:16:52.778 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 12:16:52.794 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 12:16:52.805 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 12:16:52.814 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 12:16:52.814 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 12:16:52.815 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 12:16:52.829 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 12:16:52.831 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 12:16:52.836 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:16:52.841 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 12:16:52.842 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 12:16:52.849 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_COMMITTED
2023-11-05 12:16:52.849 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_COMMITTED
2023-11-05 12:16:52.849 [t1] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 12:16:52.853 [t1] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 12:16:52.853 [t1] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 12:16:52.853 [t1] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 12:16:52.853 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 12:16:52.853 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 12:16:52.853 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 12:16:52.853 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 12:16:52.853 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 12:16:52.854 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 12:16:52.854 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 12:16:52.854 [t1] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 12:16:52.854 [t1] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 12:16:52.854 [t1] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 12:16:52.854 [t1] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 12:16:52.854 [t1] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 12:16:52.854 [t1] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 12:16:52.855 [t1] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 12:16:52.855 [t1] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 12:16:52.855 [t1] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 12:16:52.855 [t1] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 12:16:52.855 [t1] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 12:16:52.855 [t1] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 12:16:52.855 [t1] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 12:16:52.856 [t1] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 12:16:52.856 [t1] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 12:16:52.856 [t1] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 12:16:52.856 [t1] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 12:16:52.856 [t1] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 12:16:52.856 [t1] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 12:16:52.856 [t1] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 12:16:52.856 [t1] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 12:16:52.856 [t1] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 12:16:52.856 [t1] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 12:16:52.856 [t1] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 12:16:52.856 [t1] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 12:16:52.856 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 12:16:53.085 [t1] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2503bb96
2023-11-05 12:16:53.087 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 12:16:53.091 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@2027571613 wrapping com.mysql.cj.jdbc.ConnectionImpl@2503bb96] for JDBC transaction
2023-11-05 12:16:53.096 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@2027571613 wrapping com.mysql.cj.jdbc.ConnectionImpl@2503bb96] to 2
2023-11-05 12:16:53.097 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@2027571613 wrapping com.mysql.cj.jdbc.ConnectionImpl@2503bb96] to manual commit
2023-11-05 12:16:53.098 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程开启事务
2023-11-05 12:16:53.099 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@79cee442
2023-11-05 12:16:53.099 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1224833221 wrapping com.mysql.cj.jdbc.ConnectionImpl@79cee442] for JDBC transaction
2023-11-05 12:16:53.099 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1224833221 wrapping com.mysql.cj.jdbc.ConnectionImpl@79cee442] to 2
2023-11-05 12:16:53.101 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1224833221 wrapping com.mysql.cj.jdbc.ConnectionImpl@79cee442] to manual commit
2023-11-05 12:16:53.101 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程开启事务
2023-11-05 12:16:53.127 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@58dc1136
2023-11-05 12:16:53.131 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:16:53.131 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:16:53.158 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:16:53.161 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5c92ad4b
2023-11-05 12:16:53.165 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:16:53.165 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:16:53.166 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:16:53.167 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了3条数据
2023-11-05 12:16:53.189 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@51ce4fea
2023-11-05 12:16:53.195 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 12:16:53.196 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 12:16:53.220 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6344983
2023-11-05 12:16:53.251 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@693f5486
2023-11-05 12:16:53.294 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5bafb575
2023-11-05 12:16:53.328 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@f81c4d1
2023-11-05 12:16:53.357 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@48be4d0a
2023-11-05 12:16:53.388 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@43a1581c
2023-11-05 12:16:53.420 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@751002f0
2023-11-05 12:16:53.451 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1059e29f
2023-11-05 12:16:53.484 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3500e91c
2023-11-05 12:16:53.513 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4ebddef3
2023-11-05 12:16:53.545 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1e25d070
2023-11-05 12:16:53.574 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@25a045fa
2023-11-05 12:16:53.609 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@21f2bbe7
2023-11-05 12:16:53.638 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3bdf4953
2023-11-05 12:16:53.669 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3c6eed2e
2023-11-05 12:16:53.703 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5bee0f04
2023-11-05 12:16:53.731 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@22f504db
2023-11-05 12:16:54.103 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 12:16:54.105 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 12:16:54.109 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 12:16:54.109 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 12:16:54.109 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@2027571613 wrapping com.mysql.cj.jdbc.ConnectionImpl@2503bb96]
2023-11-05 12:16:54.126 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@2027571613 wrapping com.mysql.cj.jdbc.ConnectionImpl@2503bb96] to 4
2023-11-05 12:16:54.128 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@2027571613 wrapping com.mysql.cj.jdbc.ConnectionImpl@2503bb96] after transaction
2023-11-05 12:16:54.137 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 12:16:55.177 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:16:55.178 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:16:55.180 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:16:55.181 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:16:55.181 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:16:55.181 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:16:55.184 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了4条数据
2023-11-05 12:16:55.184 [t2] WARN  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程出现了幻读，事务回滚
2023-11-05 12:16:55.184 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction rollback
2023-11-05 12:16:55.184 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Rolling back JDBC transaction on Connection [HikariProxyConnection@1224833221 wrapping com.mysql.cj.jdbc.ConnectionImpl@79cee442]
2023-11-05 12:16:55.185 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1224833221 wrapping com.mysql.cj.jdbc.ConnectionImpl@79cee442] to 4
2023-11-05 12:16:55.187 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1224833221 wrapping com.mysql.cj.jdbc.ConnectionImpl@79cee442] after transaction
2023-11-05 12:16:55.189 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 12:16:55.190 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 12:16:55.190 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:16:55.194 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 12:16:55.195 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:16:55.204 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 12:16:52 CST 2023
2023-11-05 12:16:55.204 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 12:16:55.204 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=22, active=0, idle=22, waiting=0)
2023-11-05 12:16:55.205 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2503bb96: (connection evicted)
2023-11-05 12:16:55.206 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@79cee442: (connection evicted)
2023-11-05 12:16:55.207 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@58dc1136: (connection evicted)
2023-11-05 12:16:55.207 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5c92ad4b: (connection evicted)
2023-11-05 12:16:55.207 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@51ce4fea: (connection evicted)
2023-11-05 12:16:55.208 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6344983: (connection evicted)
2023-11-05 12:16:55.208 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@693f5486: (connection evicted)
2023-11-05 12:16:55.208 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5bafb575: (connection evicted)
2023-11-05 12:16:55.208 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@f81c4d1: (connection evicted)
2023-11-05 12:16:55.209 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@48be4d0a: (connection evicted)
2023-11-05 12:16:55.209 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@43a1581c: (connection evicted)
2023-11-05 12:16:55.209 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@751002f0: (connection evicted)
2023-11-05 12:16:55.210 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1059e29f: (connection evicted)
2023-11-05 12:16:55.210 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3500e91c: (connection evicted)
2023-11-05 12:16:55.210 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4ebddef3: (connection evicted)
2023-11-05 12:16:55.210 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1e25d070: (connection evicted)
2023-11-05 12:16:55.211 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@25a045fa: (connection evicted)
2023-11-05 12:16:55.212 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@21f2bbe7: (connection evicted)
2023-11-05 12:16:55.212 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3bdf4953: (connection evicted)
2023-11-05 12:16:55.212 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3c6eed2e: (connection evicted)
2023-11-05 12:16:55.212 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5bee0f04: (connection evicted)
2023-11-05 12:16:55.213 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@22f504db: (connection evicted)
2023-11-05 12:16:55.213 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 12:16:55.213 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 12:17:15.390 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 12:17:15.399 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 12:17:15.407 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 12:17:15.408 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:17:15.417 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:17:15.417 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:17:15.446 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 12:17:15.446 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 12:17:15.475 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 12:17:15.489 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 12:17:15.522 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 12:17:15.523 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 12:17:15.523 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 12:17:15.523 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 12:17:15.603 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 12:17:15.606 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 12:17:15.607 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 12:17:15.611 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 12:17:15.614 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 12:17:15.620 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:15.623 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:15.623 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:15.623 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:15.623 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:15.626 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:15.627 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:15.627 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:15.627 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:15.628 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:15.628 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 12:17:15.630 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 12:17:15.631 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 12:17:15.633 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 12:17:15.641 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 12:17:15.648 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 12:17:15.657 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 12:17:15.658 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 12:17:15.658 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 12:17:15.669 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 12:17:15.670 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 12:17:15.673 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:17:15.678 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 12:17:15.678 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 12:17:15.682 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_REPEATABLE_READ
2023-11-05 12:17:15.682 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_COMMITTED
2023-11-05 12:17:15.683 [t2] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 12:17:15.686 [t2] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 12:17:15.686 [t2] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 12:17:15.686 [t2] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 12:17:15.686 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 12:17:15.687 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 12:17:15.687 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 12:17:15.687 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 12:17:15.687 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 12:17:15.687 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 12:17:15.687 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 12:17:15.687 [t2] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 12:17:15.687 [t2] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 12:17:15.688 [t2] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 12:17:15.690 [t2] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 12:17:15.690 [t2] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 12:17:15.690 [t2] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 12:17:15.690 [t2] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 12:17:15.690 [t2] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 12:17:15.690 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 12:17:15.926 [t2] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6e8dc65d
2023-11-05 12:17:15.928 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 12:17:15.931 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@853622173 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e8dc65d] for JDBC transaction
2023-11-05 12:17:15.934 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@853622173 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e8dc65d] to 2
2023-11-05 12:17:15.935 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@853622173 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e8dc65d] to manual commit
2023-11-05 12:17:15.935 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程开启事务
2023-11-05 12:17:15.938 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd
2023-11-05 12:17:15.938 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@61130527 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] for JDBC transaction
2023-11-05 12:17:15.938 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@61130527 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to 4
2023-11-05 12:17:15.938 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@61130527 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to manual commit
2023-11-05 12:17:15.938 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程开启事务
2023-11-05 12:17:15.961 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:17:15.962 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:17:15.971 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1a4cdac9
2023-11-05 12:17:15.987 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:17:15.990 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:17:15.990 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:17:15.991 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:17:15.992 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了4条数据
2023-11-05 12:17:16.003 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1e02a434
2023-11-05 12:17:16.033 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@a33cdb5
2023-11-05 12:17:16.040 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 12:17:16.041 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 12:17:16.065 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4639bf6a
2023-11-05 12:17:16.096 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6647e214
2023-11-05 12:17:16.127 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2bb2c70b
2023-11-05 12:17:16.157 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@28f925f
2023-11-05 12:17:16.189 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2eb58a01
2023-11-05 12:17:16.219 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@12e1d661
2023-11-05 12:17:16.251 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@176c69df
2023-11-05 12:17:16.282 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@23e56051
2023-11-05 12:17:16.315 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@63506d26
2023-11-05 12:17:16.345 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@14abfc15
2023-11-05 12:17:16.378 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@65360e16
2023-11-05 12:17:16.408 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@72520436
2023-11-05 12:17:16.440 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3a18a6c6
2023-11-05 12:17:16.469 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@75cf1f92
2023-11-05 12:17:16.502 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3fbc1dd2
2023-11-05 12:17:16.536 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@536a361b
2023-11-05 12:17:16.562 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@21cbb8ab
2023-11-05 12:17:16.946 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 12:17:16.947 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 12:17:16.948 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 12:17:16.948 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 12:17:16.948 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@61130527 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd]
2023-11-05 12:17:16.964 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@61130527 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] after transaction
2023-11-05 12:17:16.976 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 12:17:18.001 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:17:18.003 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:17:18.006 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:17:18.007 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:17:18.007 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:17:18.008 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:17:18.011 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了5条数据
2023-11-05 12:17:18.011 [t2] WARN  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程出现了幻读，事务回滚
2023-11-05 12:17:18.011 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction rollback
2023-11-05 12:17:18.012 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Rolling back JDBC transaction on Connection [HikariProxyConnection@853622173 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e8dc65d]
2023-11-05 12:17:18.014 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@853622173 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e8dc65d] to 4
2023-11-05 12:17:18.015 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@853622173 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e8dc65d] after transaction
2023-11-05 12:17:18.018 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 12:17:18.019 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 12:17:18.019 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:17:18.023 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 12:17:18.023 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:17:18.025 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 12:17:15 CST 2023
2023-11-05 12:17:18.025 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 12:17:18.026 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=22, active=0, idle=22, waiting=0)
2023-11-05 12:17:18.026 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6e8dc65d: (connection evicted)
2023-11-05 12:17:18.027 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd: (connection evicted)
2023-11-05 12:17:18.028 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1a4cdac9: (connection evicted)
2023-11-05 12:17:18.028 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1e02a434: (connection evicted)
2023-11-05 12:17:18.028 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@a33cdb5: (connection evicted)
2023-11-05 12:17:18.028 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4639bf6a: (connection evicted)
2023-11-05 12:17:18.028 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6647e214: (connection evicted)
2023-11-05 12:17:18.030 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2bb2c70b: (connection evicted)
2023-11-05 12:17:18.030 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@28f925f: (connection evicted)
2023-11-05 12:17:18.030 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2eb58a01: (connection evicted)
2023-11-05 12:17:18.030 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@12e1d661: (connection evicted)
2023-11-05 12:17:18.031 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@176c69df: (connection evicted)
2023-11-05 12:17:18.031 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@23e56051: (connection evicted)
2023-11-05 12:17:18.032 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@63506d26: (connection evicted)
2023-11-05 12:17:18.032 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@14abfc15: (connection evicted)
2023-11-05 12:17:18.032 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@65360e16: (connection evicted)
2023-11-05 12:17:18.032 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@72520436: (connection evicted)
2023-11-05 12:17:18.033 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3a18a6c6: (connection evicted)
2023-11-05 12:17:18.033 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@75cf1f92: (connection evicted)
2023-11-05 12:17:18.033 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3fbc1dd2: (connection evicted)
2023-11-05 12:17:18.034 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@536a361b: (connection evicted)
2023-11-05 12:17:18.034 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@21cbb8ab: (connection evicted)
2023-11-05 12:17:18.034 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 12:17:18.034 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 12:17:43.661 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 12:17:43.672 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 12:17:43.680 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 12:17:43.682 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:17:43.691 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:17:43.692 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:17:43.719 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 12:17:43.719 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 12:17:43.744 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 12:17:43.761 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 12:17:43.798 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 12:17:43.798 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 12:17:43.800 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 12:17:43.800 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 12:17:43.888 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 12:17:43.891 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 12:17:43.892 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 12:17:43.897 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 12:17:43.900 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 12:17:43.906 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:43.908 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:43.908 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:43.908 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:43.908 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:43.910 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:43.912 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:43.912 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:43.912 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:43.912 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:17:43.913 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 12:17:43.915 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 12:17:43.917 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 12:17:43.919 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 12:17:43.926 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 12:17:43.933 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 12:17:43.941 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 12:17:43.942 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 12:17:43.943 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 12:17:43.954 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 12:17:43.955 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 12:17:43.958 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:17:43.962 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 12:17:43.962 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 12:17:43.968 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_COMMITTED
2023-11-05 12:17:43.968 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_SERIALIZABLE
2023-11-05 12:17:43.969 [t2] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 12:17:43.973 [t2] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 12:17:43.973 [t2] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 12:17:43.973 [t2] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 12:17:43.973 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 12:17:43.973 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 12:17:43.973 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 12:17:43.973 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 12:17:43.973 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 12:17:43.973 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 12:17:43.974 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 12:17:43.974 [t2] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 12:17:43.974 [t2] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 12:17:43.974 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 12:17:43.974 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 12:17:43.974 [t2] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 12:17:43.974 [t2] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 12:17:43.974 [t2] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 12:17:43.974 [t2] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 12:17:43.975 [t2] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 12:17:43.975 [t2] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 12:17:43.975 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 12:17:43.975 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 12:17:43.975 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 12:17:43.975 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 12:17:43.975 [t2] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 12:17:43.975 [t2] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 12:17:43.975 [t2] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 12:17:43.975 [t2] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 12:17:43.975 [t2] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 12:17:43.976 [t2] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 12:17:43.976 [t2] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 12:17:43.976 [t2] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 12:17:43.976 [t2] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 12:17:43.976 [t2] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 12:17:43.976 [t2] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 12:17:43.976 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 12:17:44.214 [t2] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@170bd460
2023-11-05 12:17:44.216 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 12:17:44.218 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1790964031 wrapping com.mysql.cj.jdbc.ConnectionImpl@170bd460] for JDBC transaction
2023-11-05 12:17:44.222 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1790964031 wrapping com.mysql.cj.jdbc.ConnectionImpl@170bd460] to 2
2023-11-05 12:17:44.223 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1790964031 wrapping com.mysql.cj.jdbc.ConnectionImpl@170bd460] to manual commit
2023-11-05 12:17:44.224 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程开启事务
2023-11-05 12:17:44.227 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd
2023-11-05 12:17:44.227 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] for JDBC transaction
2023-11-05 12:17:44.227 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to 8
2023-11-05 12:17:44.228 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to manual commit
2023-11-05 12:17:44.228 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程开启事务
2023-11-05 12:17:44.250 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:17:44.251 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:17:44.258 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1a4cdac9
2023-11-05 12:17:44.282 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:17:44.286 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:17:44.287 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:17:44.288 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:17:44.292 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了5条数据
2023-11-05 12:17:44.294 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1e02a434
2023-11-05 12:17:44.320 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@a33cdb5
2023-11-05 12:17:44.326 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 12:17:44.327 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 12:17:44.351 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4639bf6a
2023-11-05 12:17:44.381 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6647e214
2023-11-05 12:17:44.413 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2bb2c70b
2023-11-05 12:17:44.444 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@28f925f
2023-11-05 12:17:44.474 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2eb58a01
2023-11-05 12:17:44.506 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@12e1d661
2023-11-05 12:17:44.537 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@176c69df
2023-11-05 12:17:44.567 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@23e56051
2023-11-05 12:17:44.598 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@63506d26
2023-11-05 12:17:44.631 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@14abfc15
2023-11-05 12:17:44.663 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@65360e16
2023-11-05 12:17:44.690 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@72520436
2023-11-05 12:17:44.722 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3a18a6c6
2023-11-05 12:17:44.753 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@75cf1f92
2023-11-05 12:17:44.787 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3fbc1dd2
2023-11-05 12:17:44.819 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@536a361b
2023-11-05 12:17:44.847 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@21cbb8ab
2023-11-05 12:17:45.246 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 12:17:45.248 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 12:17:45.253 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 12:17:45.254 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 12:17:45.255 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd]
2023-11-05 12:17:45.261 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to 4
2023-11-05 12:17:45.263 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] after transaction
2023-11-05 12:17:45.271 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 12:17:46.297 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:17:46.297 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:17:46.299 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:17:46.299 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:17:46.299 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:17:46.299 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:17:46.300 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了6条数据
2023-11-05 12:17:46.300 [t2] WARN  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程出现了幻读，事务回滚
2023-11-05 12:17:46.300 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction rollback
2023-11-05 12:17:46.300 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Rolling back JDBC transaction on Connection [HikariProxyConnection@1790964031 wrapping com.mysql.cj.jdbc.ConnectionImpl@170bd460]
2023-11-05 12:17:46.301 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1790964031 wrapping com.mysql.cj.jdbc.ConnectionImpl@170bd460] to 4
2023-11-05 12:17:46.301 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1790964031 wrapping com.mysql.cj.jdbc.ConnectionImpl@170bd460] after transaction
2023-11-05 12:17:46.302 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 12:17:46.303 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 12:17:46.303 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:17:46.306 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 12:17:46.306 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:17:46.308 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 12:17:43 CST 2023
2023-11-05 12:17:46.309 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 12:17:46.310 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=22, active=0, idle=22, waiting=0)
2023-11-05 12:17:46.310 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@170bd460: (connection evicted)
2023-11-05 12:17:46.311 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd: (connection evicted)
2023-11-05 12:17:46.312 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1a4cdac9: (connection evicted)
2023-11-05 12:17:46.312 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1e02a434: (connection evicted)
2023-11-05 12:17:46.312 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@a33cdb5: (connection evicted)
2023-11-05 12:17:46.313 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4639bf6a: (connection evicted)
2023-11-05 12:17:46.313 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6647e214: (connection evicted)
2023-11-05 12:17:46.313 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2bb2c70b: (connection evicted)
2023-11-05 12:17:46.314 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@28f925f: (connection evicted)
2023-11-05 12:17:46.314 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2eb58a01: (connection evicted)
2023-11-05 12:17:46.314 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@12e1d661: (connection evicted)
2023-11-05 12:17:46.314 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@176c69df: (connection evicted)
2023-11-05 12:17:46.315 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@23e56051: (connection evicted)
2023-11-05 12:17:46.315 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@63506d26: (connection evicted)
2023-11-05 12:17:46.315 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@14abfc15: (connection evicted)
2023-11-05 12:17:46.316 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@65360e16: (connection evicted)
2023-11-05 12:17:46.316 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@72520436: (connection evicted)
2023-11-05 12:17:46.316 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3a18a6c6: (connection evicted)
2023-11-05 12:17:46.316 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@75cf1f92: (connection evicted)
2023-11-05 12:17:46.316 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3fbc1dd2: (connection evicted)
2023-11-05 12:17:46.317 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@536a361b: (connection evicted)
2023-11-05 12:17:46.317 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@21cbb8ab: (connection evicted)
2023-11-05 12:17:46.317 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 12:17:46.317 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 12:18:00.269 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 12:18:00.277 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 12:18:00.286 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 12:18:00.287 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:18:00.296 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:18:00.296 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:18:00.327 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 12:18:00.328 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 12:18:00.350 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 12:18:00.357 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 12:18:00.385 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 12:18:00.386 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 12:18:00.386 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 12:18:00.387 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 12:18:00.468 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 12:18:00.470 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 12:18:00.471 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 12:18:00.478 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 12:18:00.484 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 12:18:00.493 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:00.498 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:00.498 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:00.498 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:00.498 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:00.508 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:00.509 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:00.509 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:00.509 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:00.510 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:00.510 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 12:18:00.513 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 12:18:00.515 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 12:18:00.519 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 12:18:00.532 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 12:18:00.543 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 12:18:00.553 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 12:18:00.554 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 12:18:00.555 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 12:18:00.564 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 12:18:00.566 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 12:18:00.570 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:18:00.574 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 12:18:00.575 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 12:18:00.582 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_SERIALIZABLE
2023-11-05 12:18:00.582 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_SERIALIZABLE
2023-11-05 12:18:00.583 [t1] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 12:18:00.586 [t1] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 12:18:00.587 [t1] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 12:18:00.587 [t1] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 12:18:00.587 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 12:18:00.587 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 12:18:00.587 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 12:18:00.587 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 12:18:00.587 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 12:18:00.587 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 12:18:00.588 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 12:18:00.588 [t1] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 12:18:00.589 [t1] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 12:18:00.589 [t1] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 12:18:00.589 [t1] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 12:18:00.589 [t1] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 12:18:00.589 [t1] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 12:18:00.589 [t1] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 12:18:00.589 [t1] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 12:18:00.589 [t1] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 12:18:00.589 [t1] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 12:18:00.589 [t1] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 12:18:00.589 [t1] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 12:18:00.589 [t1] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 12:18:00.589 [t1] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 12:18:00.589 [t1] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 12:18:00.589 [t1] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 12:18:00.589 [t1] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 12:18:00.590 [t1] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 12:18:00.590 [t1] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 12:18:00.590 [t1] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 12:18:00.590 [t1] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 12:18:00.590 [t1] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 12:18:00.590 [t1] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 12:18:00.590 [t1] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 12:18:00.590 [t1] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 12:18:00.590 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 12:18:00.831 [t1] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@c95000
2023-11-05 12:18:00.833 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 12:18:00.837 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000] for JDBC transaction
2023-11-05 12:18:00.841 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000] to 8
2023-11-05 12:18:00.843 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000] to manual commit
2023-11-05 12:18:00.844 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程开启事务
2023-11-05 12:18:00.851 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd
2023-11-05 12:18:00.851 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@294261919 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] for JDBC transaction
2023-11-05 12:18:00.851 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@294261919 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to 8
2023-11-05 12:18:00.852 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@294261919 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to manual commit
2023-11-05 12:18:00.852 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程开启事务
2023-11-05 12:18:00.872 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:18:00.872 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:18:00.886 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1a4cdac9
2023-11-05 12:18:00.898 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:18:00.900 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:18:00.901 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:18:00.901 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:18:00.903 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了6条数据
2023-11-05 12:18:00.916 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1e02a434
2023-11-05 12:18:00.939 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=4, active=2, idle=2, waiting=0)
2023-11-05 12:18:00.940 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=4, active=2, idle=2, waiting=0)
2023-11-05 12:18:00.947 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@a33cdb5
2023-11-05 12:18:00.980 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4639bf6a
2023-11-05 12:18:01.009 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6647e214
2023-11-05 12:18:01.040 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2bb2c70b
2023-11-05 12:18:01.072 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@28f925f
2023-11-05 12:18:01.102 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2eb58a01
2023-11-05 12:18:01.133 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@12e1d661
2023-11-05 12:18:01.163 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@176c69df
2023-11-05 12:18:01.200 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@23e56051
2023-11-05 12:18:01.229 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@63506d26
2023-11-05 12:18:01.257 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@14abfc15
2023-11-05 12:18:01.290 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@65360e16
2023-11-05 12:18:01.318 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@72520436
2023-11-05 12:18:01.353 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3a18a6c6
2023-11-05 12:18:01.381 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@75cf1f92
2023-11-05 12:18:01.411 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3fbc1dd2
2023-11-05 12:18:01.442 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@536a361b
2023-11-05 12:18:01.471 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@21cbb8ab
2023-11-05 12:18:01.858 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 12:18:01.861 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 12:18:02.913 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:18:02.913 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:18:02.914 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:18:02.915 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:18:02.915 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:18:02.916 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:18:02.917 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了6条数据
2023-11-05 12:18:02.917 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 12:18:02.917 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@294261919 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd]
2023-11-05 12:18:02.917 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 12:18:02.917 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 12:18:02.917 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000]
2023-11-05 12:18:02.917 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@294261919 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to 4
2023-11-05 12:18:02.918 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@294261919 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] after transaction
2023-11-05 12:18:02.923 [t2] WARN  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程执行正常，事务提交
2023-11-05 12:18:02.930 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000] to 4
2023-11-05 12:18:02.930 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000] after transaction
2023-11-05 12:18:02.930 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 12:18:02.931 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 12:18:02.931 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 12:18:02.932 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:18:02.934 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 12:18:02.935 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:18:02.936 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 12:18:00 CST 2023
2023-11-05 12:18:02.937 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 12:18:02.937 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=22, active=0, idle=22, waiting=0)
2023-11-05 12:18:02.938 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@c95000: (connection evicted)
2023-11-05 12:18:02.939 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd: (connection evicted)
2023-11-05 12:18:02.939 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1a4cdac9: (connection evicted)
2023-11-05 12:18:02.939 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1e02a434: (connection evicted)
2023-11-05 12:18:02.940 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@a33cdb5: (connection evicted)
2023-11-05 12:18:02.940 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4639bf6a: (connection evicted)
2023-11-05 12:18:02.940 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6647e214: (connection evicted)
2023-11-05 12:18:02.940 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2bb2c70b: (connection evicted)
2023-11-05 12:18:02.940 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@28f925f: (connection evicted)
2023-11-05 12:18:02.941 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2eb58a01: (connection evicted)
2023-11-05 12:18:02.941 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@12e1d661: (connection evicted)
2023-11-05 12:18:02.941 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@176c69df: (connection evicted)
2023-11-05 12:18:02.942 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@23e56051: (connection evicted)
2023-11-05 12:18:02.942 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@63506d26: (connection evicted)
2023-11-05 12:18:02.942 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@14abfc15: (connection evicted)
2023-11-05 12:18:02.943 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@65360e16: (connection evicted)
2023-11-05 12:18:02.943 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@72520436: (connection evicted)
2023-11-05 12:18:02.943 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3a18a6c6: (connection evicted)
2023-11-05 12:18:02.944 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@75cf1f92: (connection evicted)
2023-11-05 12:18:02.944 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3fbc1dd2: (connection evicted)
2023-11-05 12:18:02.944 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@536a361b: (connection evicted)
2023-11-05 12:18:02.945 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@21cbb8ab: (connection evicted)
2023-11-05 12:18:02.945 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 12:18:02.945 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 12:18:30.518 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 12:18:30.526 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 12:18:30.534 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 12:18:30.535 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:18:30.544 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:18:30.544 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:18:30.569 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 12:18:30.570 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 12:18:30.593 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 12:18:30.600 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 12:18:30.634 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 12:18:30.635 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 12:18:30.636 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 12:18:30.636 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 12:18:30.724 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 12:18:30.725 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 12:18:30.727 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 12:18:30.732 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 12:18:30.735 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 12:18:30.741 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:30.743 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:30.743 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:30.743 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:30.744 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:30.747 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:30.748 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:30.748 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:30.749 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:30.749 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:18:30.749 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 12:18:30.752 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 12:18:30.753 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 12:18:30.756 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 12:18:30.762 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 12:18:30.768 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 12:18:30.776 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 12:18:30.777 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 12:18:30.777 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 12:18:30.785 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 12:18:30.787 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 12:18:30.791 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:18:30.795 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 12:18:30.796 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 12:18:30.800 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_SERIALIZABLE
2023-11-05 12:18:30.800 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_UNCOMMITTED
2023-11-05 12:18:30.801 [t1] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 12:18:30.803 [t1] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 12:18:30.804 [t1] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 12:18:30.804 [t1] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 12:18:30.804 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 12:18:30.804 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 12:18:30.804 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 12:18:30.804 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 12:18:30.804 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 12:18:30.804 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 12:18:30.804 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 12:18:30.805 [t1] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 12:18:30.805 [t1] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 12:18:30.805 [t1] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 12:18:30.805 [t1] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 12:18:30.805 [t1] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 12:18:30.805 [t1] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 12:18:30.805 [t1] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 12:18:30.805 [t1] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 12:18:30.805 [t1] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 12:18:30.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 12:18:30.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 12:18:30.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 12:18:30.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 12:18:30.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 12:18:30.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 12:18:30.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 12:18:30.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 12:18:30.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 12:18:30.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 12:18:30.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 12:18:30.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 12:18:30.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 12:18:30.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 12:18:30.806 [t1] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 12:18:30.807 [t1] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 12:18:30.807 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 12:18:31.052 [t1] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@52b8287e
2023-11-05 12:18:31.054 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 12:18:31.057 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1862949408 wrapping com.mysql.cj.jdbc.ConnectionImpl@52b8287e] for JDBC transaction
2023-11-05 12:18:31.060 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1862949408 wrapping com.mysql.cj.jdbc.ConnectionImpl@52b8287e] to 1
2023-11-05 12:18:31.062 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1862949408 wrapping com.mysql.cj.jdbc.ConnectionImpl@52b8287e] to manual commit
2023-11-05 12:18:31.062 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程开启事务
2023-11-05 12:18:31.066 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd
2023-11-05 12:18:31.066 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1695988697 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] for JDBC transaction
2023-11-05 12:18:31.066 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1695988697 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to 8
2023-11-05 12:18:31.067 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1695988697 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to manual commit
2023-11-05 12:18:31.067 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程开启事务
2023-11-05 12:18:31.096 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1a4cdac9
2023-11-05 12:18:31.098 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:18:31.099 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:18:31.125 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:18:31.127 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1e02a434
2023-11-05 12:18:31.133 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:18:31.134 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:18:31.134 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:18:31.136 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了7条数据
2023-11-05 12:18:31.158 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@a33cdb5
2023-11-05 12:18:31.164 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 12:18:31.165 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 12:18:31.188 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4639bf6a
2023-11-05 12:18:31.219 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6647e214
2023-11-05 12:18:31.252 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2bb2c70b
2023-11-05 12:18:31.282 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@28f925f
2023-11-05 12:18:31.314 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2eb58a01
2023-11-05 12:18:31.343 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@12e1d661
2023-11-05 12:18:31.374 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@176c69df
2023-11-05 12:18:31.406 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@23e56051
2023-11-05 12:18:31.436 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@63506d26
2023-11-05 12:18:31.468 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@14abfc15
2023-11-05 12:18:31.503 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@65360e16
2023-11-05 12:18:31.532 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@72520436
2023-11-05 12:18:31.563 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3a18a6c6
2023-11-05 12:18:31.595 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@75cf1f92
2023-11-05 12:18:31.635 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3fbc1dd2
2023-11-05 12:18:31.666 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@536a361b
2023-11-05 12:18:31.689 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@21cbb8ab
2023-11-05 12:18:32.078 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 12:18:32.081 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 12:18:33.145 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:18:33.145 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:18:33.147 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:18:33.148 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:18:33.148 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:18:33.150 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:18:33.152 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了7条数据
2023-11-05 12:18:33.152 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 12:18:33.152 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@1695988697 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd]
2023-11-05 12:18:33.153 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1695988697 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to 4
2023-11-05 12:18:33.153 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 12:18:33.153 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 12:18:33.153 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@1862949408 wrapping com.mysql.cj.jdbc.ConnectionImpl@52b8287e]
2023-11-05 12:18:33.153 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1695988697 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] after transaction
2023-11-05 12:18:33.158 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程执行正常，事务提交
2023-11-05 12:18:33.158 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1862949408 wrapping com.mysql.cj.jdbc.ConnectionImpl@52b8287e] to 4
2023-11-05 12:18:33.159 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1862949408 wrapping com.mysql.cj.jdbc.ConnectionImpl@52b8287e] after transaction
2023-11-05 12:18:33.159 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 12:18:33.163 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 12:18:33.164 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 12:18:33.164 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:18:33.168 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 12:18:33.168 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:18:33.171 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 12:18:30 CST 2023
2023-11-05 12:18:33.172 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 12:18:33.172 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=22, active=0, idle=22, waiting=0)
2023-11-05 12:18:33.173 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@52b8287e: (connection evicted)
2023-11-05 12:18:33.174 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd: (connection evicted)
2023-11-05 12:18:33.174 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1a4cdac9: (connection evicted)
2023-11-05 12:18:33.175 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1e02a434: (connection evicted)
2023-11-05 12:18:33.175 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@a33cdb5: (connection evicted)
2023-11-05 12:18:33.175 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4639bf6a: (connection evicted)
2023-11-05 12:18:33.175 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6647e214: (connection evicted)
2023-11-05 12:18:33.176 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2bb2c70b: (connection evicted)
2023-11-05 12:18:33.176 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@28f925f: (connection evicted)
2023-11-05 12:18:33.176 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2eb58a01: (connection evicted)
2023-11-05 12:18:33.176 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@12e1d661: (connection evicted)
2023-11-05 12:18:33.176 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@176c69df: (connection evicted)
2023-11-05 12:18:33.177 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@23e56051: (connection evicted)
2023-11-05 12:18:33.177 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@63506d26: (connection evicted)
2023-11-05 12:18:33.177 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@14abfc15: (connection evicted)
2023-11-05 12:18:33.177 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@65360e16: (connection evicted)
2023-11-05 12:18:33.178 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@72520436: (connection evicted)
2023-11-05 12:18:33.178 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3a18a6c6: (connection evicted)
2023-11-05 12:18:33.178 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@75cf1f92: (connection evicted)
2023-11-05 12:18:33.178 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3fbc1dd2: (connection evicted)
2023-11-05 12:18:33.179 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@536a361b: (connection evicted)
2023-11-05 12:18:33.179 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@21cbb8ab: (connection evicted)
2023-11-05 12:18:33.179 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 12:18:33.179 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 12:19:05.469 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 12:19:05.477 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 12:19:05.484 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 12:19:05.486 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:19:05.493 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:19:05.494 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 12:19:05.525 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 12:19:05.525 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 12:19:05.548 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 12:19:05.557 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 12:19:05.587 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 12:19:05.587 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 12:19:05.588 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 12:19:05.588 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 12:19:05.677 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 12:19:05.681 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 12:19:05.683 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 12:19:05.690 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 12:19:05.694 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 12:19:05.705 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:19:05.710 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:19:05.710 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:19:05.710 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:19:05.710 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:19:05.720 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:19:05.722 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:19:05.722 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:19:05.723 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:19:05.723 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 12:19:05.723 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 12:19:05.726 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 12:19:05.728 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 12:19:05.733 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 12:19:05.746 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 12:19:05.754 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 12:19:05.763 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 12:19:05.764 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 12:19:05.765 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 12:19:05.774 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 12:19:05.776 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 12:19:05.781 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:19:05.786 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 12:19:05.787 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 12:19:05.794 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_UNCOMMITTED
2023-11-05 12:19:05.794 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_SERIALIZABLE
2023-11-05 12:19:05.795 [t1] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 12:19:05.798 [t1] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 12:19:05.799 [t1] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 12:19:05.799 [t1] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 12:19:05.799 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 12:19:05.799 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 12:19:05.799 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 12:19:05.799 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 12:19:05.799 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 12:19:05.800 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 12:19:05.800 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 12:19:05.800 [t1] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 12:19:05.800 [t1] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 12:19:05.800 [t1] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 12:19:05.800 [t1] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 12:19:05.800 [t1] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 12:19:05.801 [t1] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 12:19:05.801 [t1] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 12:19:05.801 [t1] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 12:19:05.802 [t1] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 12:19:05.802 [t1] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 12:19:05.802 [t1] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 12:19:05.802 [t1] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 12:19:05.802 [t1] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 12:19:05.802 [t1] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 12:19:05.802 [t1] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 12:19:05.803 [t1] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 12:19:05.803 [t1] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 12:19:05.803 [t1] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 12:19:05.803 [t1] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 12:19:05.803 [t1] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 12:19:05.803 [t1] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 12:19:05.804 [t1] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 12:19:05.804 [t1] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 12:19:05.804 [t1] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 12:19:05.804 [t1] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 12:19:05.804 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 12:19:06.047 [t1] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@c95000
2023-11-05 12:19:06.048 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 12:19:06.051 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000] for JDBC transaction
2023-11-05 12:19:06.056 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000] to 1
2023-11-05 12:19:06.057 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000] to manual commit
2023-11-05 12:19:06.057 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程开启事务
2023-11-05 12:19:06.060 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd
2023-11-05 12:19:06.060 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@294261919 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] for JDBC transaction
2023-11-05 12:19:06.060 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@294261919 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to 8
2023-11-05 12:19:06.060 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@294261919 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to manual commit
2023-11-05 12:19:06.061 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程开启事务
2023-11-05 12:19:06.081 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1a4cdac9
2023-11-05 12:19:06.092 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:19:06.092 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:19:06.112 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1e02a434
2023-11-05 12:19:06.124 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:19:06.126 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:19:06.127 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:19:06.127 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:19:06.130 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了8条数据
2023-11-05 12:19:06.143 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@a33cdb5
2023-11-05 12:19:06.164 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 12:19:06.165 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 12:19:06.172 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4639bf6a
2023-11-05 12:19:06.203 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6647e214
2023-11-05 12:19:06.235 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2bb2c70b
2023-11-05 12:19:06.267 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@28f925f
2023-11-05 12:19:06.297 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2eb58a01
2023-11-05 12:19:06.328 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@12e1d661
2023-11-05 12:19:06.359 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@176c69df
2023-11-05 12:19:06.391 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@23e56051
2023-11-05 12:19:06.425 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@63506d26
2023-11-05 12:19:06.454 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@14abfc15
2023-11-05 12:19:06.488 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@65360e16
2023-11-05 12:19:06.515 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@72520436
2023-11-05 12:19:06.546 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3a18a6c6
2023-11-05 12:19:06.578 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@75cf1f92
2023-11-05 12:19:06.614 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3fbc1dd2
2023-11-05 12:19:06.643 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@536a361b
2023-11-05 12:19:06.672 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@21cbb8ab
2023-11-05 12:19:07.068 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 12:19:07.069 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 12:19:09.138 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 12:19:09.140 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 12:19:09.145 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 12:19:09.146 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 12:19:09.148 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 12:19:09.150 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 12:19:09.155 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了8条数据
2023-11-05 12:19:09.155 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 12:19:09.156 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@294261919 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd]
2023-11-05 12:19:09.156 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 12:19:09.156 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 12:19:09.156 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000]
2023-11-05 12:19:09.156 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@294261919 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to 4
2023-11-05 12:19:09.157 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@294261919 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] after transaction
2023-11-05 12:19:09.160 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程执行正常，事务提交
2023-11-05 12:19:09.170 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000] to 4
2023-11-05 12:19:09.171 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@195803924 wrapping com.mysql.cj.jdbc.ConnectionImpl@c95000] after transaction
2023-11-05 12:19:09.171 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 12:19:09.172 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 12:19:09.172 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 12:19:09.172 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:19:09.175 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 12:19:09.176 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 12:19:09.181 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 12:19:05 CST 2023
2023-11-05 12:19:09.182 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 12:19:09.182 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=22, active=0, idle=22, waiting=0)
2023-11-05 12:19:09.183 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@c95000: (connection evicted)
2023-11-05 12:19:09.184 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd: (connection evicted)
2023-11-05 12:19:09.184 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1a4cdac9: (connection evicted)
2023-11-05 12:19:09.184 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1e02a434: (connection evicted)
2023-11-05 12:19:09.184 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@a33cdb5: (connection evicted)
2023-11-05 12:19:09.185 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4639bf6a: (connection evicted)
2023-11-05 12:19:09.185 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6647e214: (connection evicted)
2023-11-05 12:19:09.185 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2bb2c70b: (connection evicted)
2023-11-05 12:19:09.185 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@28f925f: (connection evicted)
2023-11-05 12:19:09.185 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2eb58a01: (connection evicted)
2023-11-05 12:19:09.186 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@12e1d661: (connection evicted)
2023-11-05 12:19:09.186 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@176c69df: (connection evicted)
2023-11-05 12:19:09.186 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@23e56051: (connection evicted)
2023-11-05 12:19:09.186 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@63506d26: (connection evicted)
2023-11-05 12:19:09.187 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@14abfc15: (connection evicted)
2023-11-05 12:19:09.187 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@65360e16: (connection evicted)
2023-11-05 12:19:09.187 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@72520436: (connection evicted)
2023-11-05 12:19:09.188 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3a18a6c6: (connection evicted)
2023-11-05 12:19:09.188 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@75cf1f92: (connection evicted)
2023-11-05 12:19:09.188 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3fbc1dd2: (connection evicted)
2023-11-05 12:19:09.188 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@536a361b: (connection evicted)
2023-11-05 12:19:09.189 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@21cbb8ab: (connection evicted)
2023-11-05 12:19:09.189 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 12:19:09.189 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 13:30:06.616 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 13:30:06.625 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 13:30:06.634 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 13:30:06.635 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 13:30:06.643 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 13:30:06.643 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 13:30:06.671 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 13:30:06.672 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 13:30:06.704 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 13:30:06.714 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 13:30:06.749 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 13:30:06.750 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 13:30:06.751 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 13:30:06.751 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 13:30:06.841 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 13:30:06.844 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 13:30:06.846 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 13:30:06.850 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 13:30:06.853 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 13:30:06.860 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:30:06.861 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:30:06.862 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:30:06.862 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:30:06.862 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:30:06.866 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:30:06.867 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:30:06.867 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:30:06.867 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:30:06.867 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:30:06.868 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 13:30:06.870 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 13:30:06.871 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 13:30:06.873 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 13:30:06.879 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 13:30:06.885 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 13:30:06.893 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 13:30:06.893 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 13:30:06.894 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 13:30:06.904 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 13:30:06.905 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 13:30:06.908 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 13:30:06.913 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 13:30:06.914 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 13:30:06.920 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_SERIALIZABLE
2023-11-05 13:30:06.920 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_UNCOMMITTED
2023-11-05 13:30:06.920 [t2] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 13:30:06.924 [t2] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 13:30:06.925 [t2] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 13:30:06.925 [t2] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 13:30:06.925 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 13:30:06.925 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 13:30:06.925 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 13:30:06.925 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 13:30:06.925 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 13:30:06.925 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 13:30:06.925 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 13:30:06.926 [t2] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 13:30:06.926 [t2] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 13:30:06.926 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 13:30:06.926 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 13:30:06.926 [t2] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 13:30:06.926 [t2] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 13:30:06.926 [t2] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 13:30:06.926 [t2] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 13:30:06.926 [t2] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 13:30:06.927 [t2] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 13:30:06.927 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 13:30:06.927 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 13:30:06.927 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 13:30:06.927 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 13:30:06.927 [t2] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 13:30:06.927 [t2] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 13:30:06.927 [t2] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 13:30:06.927 [t2] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 13:30:06.927 [t2] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 13:30:06.927 [t2] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 13:30:06.928 [t2] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 13:30:06.928 [t2] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 13:30:06.928 [t2] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 13:30:06.928 [t2] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 13:30:06.928 [t2] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 13:30:06.928 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 13:30:07.158 [t2] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@40763a5d
2023-11-05 13:30:07.159 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 13:30:07.163 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@63140613 wrapping com.mysql.cj.jdbc.ConnectionImpl@40763a5d] for JDBC transaction
2023-11-05 13:30:07.165 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@63140613 wrapping com.mysql.cj.jdbc.ConnectionImpl@40763a5d] to 8
2023-11-05 13:30:07.166 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@63140613 wrapping com.mysql.cj.jdbc.ConnectionImpl@40763a5d] to manual commit
2023-11-05 13:30:07.166 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程开启事务
2023-11-05 13:30:07.171 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4de86720
2023-11-05 13:30:07.171 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@4de86720] for JDBC transaction
2023-11-05 13:30:07.171 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@4de86720] to 1
2023-11-05 13:30:07.172 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@4de86720] to manual commit
2023-11-05 13:30:07.172 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程开启事务
2023-11-05 13:30:07.193 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 13:30:07.194 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 13:30:07.206 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6cfa9254
2023-11-05 13:30:07.220 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 13:30:07.222 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 13:30:07.223 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 13:30:07.224 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 13:30:07.226 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了9条数据
2023-11-05 13:30:07.239 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@68b40a1f
2023-11-05 13:30:07.268 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@25c7c354
2023-11-05 13:30:07.275 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 13:30:07.275 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 13:30:07.300 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1fae9ee6
2023-11-05 13:30:07.331 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3160ac3f
2023-11-05 13:30:07.361 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4b314a10
2023-11-05 13:30:07.392 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@55b25810
2023-11-05 13:30:07.424 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@82f60e1
2023-11-05 13:30:07.453 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5326535
2023-11-05 13:30:07.484 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@41412e51
2023-11-05 13:30:07.516 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7ab19382
2023-11-05 13:30:07.549 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2d1381b0
2023-11-05 13:30:07.583 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@618dd9b1
2023-11-05 13:30:07.615 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@67d8a88
2023-11-05 13:30:07.641 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4da267a4
2023-11-05 13:30:07.673 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@53bc0305
2023-11-05 13:30:07.707 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6d7429ac
2023-11-05 13:30:07.738 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@18e1dd0d
2023-11-05 13:30:07.778 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@48040d6c
2023-11-05 13:30:07.799 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@47ced19c
2023-11-05 13:30:08.183 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 13:30:08.184 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 13:30:10.227 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 13:30:10.229 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 13:30:10.231 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 13:30:10.231 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 13:30:10.232 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 13:30:10.232 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 13:30:10.236 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了9条数据
2023-11-05 13:30:10.236 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 13:30:10.236 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@63140613 wrapping com.mysql.cj.jdbc.ConnectionImpl@40763a5d]
2023-11-05 13:30:10.237 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 13:30:10.237 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 13:30:10.237 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@4de86720]
2023-11-05 13:30:10.237 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@63140613 wrapping com.mysql.cj.jdbc.ConnectionImpl@40763a5d] to 4
2023-11-05 13:30:10.237 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@63140613 wrapping com.mysql.cj.jdbc.ConnectionImpl@40763a5d] after transaction
2023-11-05 13:30:10.244 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@4de86720] to 4
2023-11-05 13:30:10.244 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程执行正常，事务提交
2023-11-05 13:30:10.244 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@4de86720] after transaction
2023-11-05 13:30:10.244 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 13:30:10.246 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 13:30:10.246 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 13:30:10.246 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 13:30:10.253 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 13:30:10.253 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 13:30:10.258 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 13:30:06 CST 2023
2023-11-05 13:30:10.259 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 13:30:10.259 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=22, active=0, idle=22, waiting=0)
2023-11-05 13:30:10.260 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@40763a5d: (connection evicted)
2023-11-05 13:30:10.261 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4de86720: (connection evicted)
2023-11-05 13:30:10.262 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6cfa9254: (connection evicted)
2023-11-05 13:30:10.262 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@68b40a1f: (connection evicted)
2023-11-05 13:30:10.262 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@25c7c354: (connection evicted)
2023-11-05 13:30:10.262 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1fae9ee6: (connection evicted)
2023-11-05 13:30:10.263 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3160ac3f: (connection evicted)
2023-11-05 13:30:10.263 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4b314a10: (connection evicted)
2023-11-05 13:30:10.263 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@55b25810: (connection evicted)
2023-11-05 13:30:10.263 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@82f60e1: (connection evicted)
2023-11-05 13:30:10.264 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5326535: (connection evicted)
2023-11-05 13:30:10.264 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@41412e51: (connection evicted)
2023-11-05 13:30:10.264 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7ab19382: (connection evicted)
2023-11-05 13:30:10.264 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2d1381b0: (connection evicted)
2023-11-05 13:30:10.265 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@618dd9b1: (connection evicted)
2023-11-05 13:30:10.265 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@67d8a88: (connection evicted)
2023-11-05 13:30:10.265 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4da267a4: (connection evicted)
2023-11-05 13:30:10.265 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@53bc0305: (connection evicted)
2023-11-05 13:30:10.265 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6d7429ac: (connection evicted)
2023-11-05 13:30:10.266 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@18e1dd0d: (connection evicted)
2023-11-05 13:30:10.266 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@48040d6c: (connection evicted)
2023-11-05 13:30:10.266 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@47ced19c: (connection evicted)
2023-11-05 13:30:10.266 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 13:30:10.266 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 13:31:13.532 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 13:31:13.542 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 13:31:13.551 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 13:31:13.553 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 13:31:13.565 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 13:31:13.565 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 13:31:13.591 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 13:31:13.592 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 13:31:13.623 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 13:31:13.634 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 13:31:13.667 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 13:31:13.668 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 13:31:13.669 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 13:31:13.669 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 13:31:13.748 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 13:31:13.750 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 13:31:13.751 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 13:31:13.755 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 13:31:13.759 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 13:31:13.766 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:31:13.768 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:31:13.769 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:31:13.769 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:31:13.769 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:31:13.771 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:31:13.772 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:31:13.773 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:31:13.773 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:31:13.773 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:31:13.773 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 13:31:13.776 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 13:31:13.777 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 13:31:13.780 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 13:31:13.786 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 13:31:13.792 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 13:31:13.799 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 13:31:13.800 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 13:31:13.801 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 13:31:13.811 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 13:31:13.812 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 13:31:13.816 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 13:31:13.820 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 13:31:13.821 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 13:31:13.825 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_COMMITTED
2023-11-05 13:31:13.825 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_UNCOMMITTED
2023-11-05 13:31:13.826 [t2] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 13:31:13.829 [t2] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 13:31:13.829 [t2] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 13:31:13.829 [t2] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 13:31:13.829 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 13:31:13.829 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 13:31:13.829 [t2] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 13:31:13.829 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 13:31:13.829 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 13:31:13.829 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 13:31:13.829 [t2] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 13:31:13.830 [t2] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 13:31:13.830 [t2] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 13:31:13.830 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 13:31:13.830 [t2] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 13:31:13.830 [t2] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 13:31:13.830 [t2] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 13:31:13.830 [t2] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 13:31:13.830 [t2] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 13:31:13.830 [t2] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 13:31:13.831 [t2] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 13:31:13.831 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 13:31:13.831 [t2] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 13:31:13.831 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 13:31:13.831 [t2] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 13:31:13.831 [t2] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 13:31:13.831 [t2] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 13:31:13.831 [t2] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 13:31:13.831 [t2] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 13:31:13.831 [t2] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 13:31:13.831 [t2] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 13:31:13.831 [t2] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 13:31:13.832 [t2] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 13:31:13.832 [t2] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 13:31:13.832 [t2] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 13:31:13.832 [t2] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 13:31:13.832 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 13:31:14.057 [t2] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@170bd460
2023-11-05 13:31:14.058 [t2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 13:31:14.062 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1790964031 wrapping com.mysql.cj.jdbc.ConnectionImpl@170bd460] for JDBC transaction
2023-11-05 13:31:14.064 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1790964031 wrapping com.mysql.cj.jdbc.ConnectionImpl@170bd460] to 2
2023-11-05 13:31:14.065 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1790964031 wrapping com.mysql.cj.jdbc.ConnectionImpl@170bd460] to manual commit
2023-11-05 13:31:14.066 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程开启事务
2023-11-05 13:31:14.069 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd
2023-11-05 13:31:14.069 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] for JDBC transaction
2023-11-05 13:31:14.069 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to 1
2023-11-05 13:31:14.070 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to manual commit
2023-11-05 13:31:14.070 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程开启事务
2023-11-05 13:31:14.094 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1a4cdac9
2023-11-05 13:31:14.100 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 13:31:14.100 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 13:31:14.127 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1e02a434
2023-11-05 13:31:14.133 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 13:31:14.136 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 13:31:14.136 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 13:31:14.137 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 13:31:14.140 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了10条数据
2023-11-05 13:31:14.156 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@a33cdb5
2023-11-05 13:31:14.161 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 13:31:14.162 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 13:31:14.185 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4639bf6a
2023-11-05 13:31:14.217 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6647e214
2023-11-05 13:31:14.248 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2bb2c70b
2023-11-05 13:31:14.279 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@28f925f
2023-11-05 13:31:14.309 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2eb58a01
2023-11-05 13:31:14.341 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@12e1d661
2023-11-05 13:31:14.371 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@176c69df
2023-11-05 13:31:14.404 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@23e56051
2023-11-05 13:31:14.434 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@63506d26
2023-11-05 13:31:14.465 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@14abfc15
2023-11-05 13:31:14.499 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@65360e16
2023-11-05 13:31:14.528 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@72520436
2023-11-05 13:31:14.559 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3a18a6c6
2023-11-05 13:31:14.589 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@75cf1f92
2023-11-05 13:31:14.624 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3fbc1dd2
2023-11-05 13:31:14.653 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@536a361b
2023-11-05 13:31:14.682 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@21cbb8ab
2023-11-05 13:31:15.082 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 13:31:15.083 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 13:31:15.085 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 13:31:15.085 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 13:31:15.086 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd]
2023-11-05 13:31:15.106 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] to 4
2023-11-05 13:31:15.108 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1314647477 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd] after transaction
2023-11-05 13:31:15.116 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 13:31:17.143 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 13:31:17.143 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 13:31:17.144 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 13:31:17.145 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 13:31:17.145 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 13:31:17.145 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 13:31:17.149 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了11条数据
2023-11-05 13:31:17.149 [t2] WARN  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程出现了幻读，事务回滚
2023-11-05 13:31:17.149 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction rollback
2023-11-05 13:31:17.150 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Rolling back JDBC transaction on Connection [HikariProxyConnection@1790964031 wrapping com.mysql.cj.jdbc.ConnectionImpl@170bd460]
2023-11-05 13:31:17.150 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1790964031 wrapping com.mysql.cj.jdbc.ConnectionImpl@170bd460] to 4
2023-11-05 13:31:17.150 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1790964031 wrapping com.mysql.cj.jdbc.ConnectionImpl@170bd460] after transaction
2023-11-05 13:31:17.151 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 13:31:17.152 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 13:31:17.152 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 13:31:17.156 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 13:31:17.156 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 13:31:17.158 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 13:31:13 CST 2023
2023-11-05 13:31:17.160 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 13:31:17.160 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=22, active=0, idle=22, waiting=0)
2023-11-05 13:31:17.161 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@170bd460: (connection evicted)
2023-11-05 13:31:17.162 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3b5e2fbd: (connection evicted)
2023-11-05 13:31:17.163 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1a4cdac9: (connection evicted)
2023-11-05 13:31:17.163 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1e02a434: (connection evicted)
2023-11-05 13:31:17.163 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@a33cdb5: (connection evicted)
2023-11-05 13:31:17.163 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4639bf6a: (connection evicted)
2023-11-05 13:31:17.164 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6647e214: (connection evicted)
2023-11-05 13:31:17.164 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2bb2c70b: (connection evicted)
2023-11-05 13:31:17.164 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@28f925f: (connection evicted)
2023-11-05 13:31:17.164 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@2eb58a01: (connection evicted)
2023-11-05 13:31:17.164 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@12e1d661: (connection evicted)
2023-11-05 13:31:17.165 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@176c69df: (connection evicted)
2023-11-05 13:31:17.165 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@23e56051: (connection evicted)
2023-11-05 13:31:17.165 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@63506d26: (connection evicted)
2023-11-05 13:31:17.166 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@14abfc15: (connection evicted)
2023-11-05 13:31:17.166 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@65360e16: (connection evicted)
2023-11-05 13:31:17.166 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@72520436: (connection evicted)
2023-11-05 13:31:17.166 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3a18a6c6: (connection evicted)
2023-11-05 13:31:17.166 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@75cf1f92: (connection evicted)
2023-11-05 13:31:17.167 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3fbc1dd2: (connection evicted)
2023-11-05 13:31:17.167 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@536a361b: (connection evicted)
2023-11-05 13:31:17.167 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@21cbb8ab: (connection evicted)
2023-11-05 13:31:17.168 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 13:31:17.168 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 13:34:12.125 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [PhantomReadTest]: []
2023-11-05 13:34:12.134 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 13:34:12.145 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [PhantomReadTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 13:34:12.147 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 13:34:12.156 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.PhantomReadTest
2023-11-05 13:34:12.156 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.PhantomReadTest
2023-11-05 13:34:12.182 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 13:34:12.183 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.TransactionConfig, com.zhouyf.config.HikariDataSourceConfig]
2023-11-05 13:34:12.213 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 13:34:12.226 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 13:34:12.261 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceDirtyRead.class]
2023-11-05 13:34:12.261 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServicePhantomRead.class]
2023-11-05 13:34:12.262 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxImpl.class]
2023-11-05 13:34:12.262 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\BlogServiceTxSpmpl.class]
2023-11-05 13:34:12.344 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 13:34:12.348 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 13:34:12.350 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 13:34:12.356 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 13:34:12.358 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 13:34:12.366 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:34:12.368 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:34:12.368 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:34:12.368 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:34:12.369 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:34:12.372 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:34:12.372 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:34:12.373 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:34:12.373 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:34:12.373 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 13:34:12.373 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceDirtyRead'
2023-11-05 13:34:12.375 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 13:34:12.376 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 13:34:12.378 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 13:34:12.385 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 13:34:12.391 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 13:34:12.400 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServicePhantomRead'
2023-11-05 13:34:12.401 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxImpl'
2023-11-05 13:34:12.401 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'blogServiceTxSpmpl'
2023-11-05 13:34:12.412 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 13:34:12.413 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 13:34:12.416 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 13:34:12.420 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 13:34:12.421 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 13:34:12.427 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_REPEATABLE_READ
2023-11-05 13:34:12.427 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRED,ISOLATION_READ_UNCOMMITTED
2023-11-05 13:34:12.427 [t1] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 13:34:12.431 [t1] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 13:34:12.432 [t1] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 13:34:12.432 [t1] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 13:34:12.432 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 13:34:12.432 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 13:34:12.432 [t1] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 13:34:12.432 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 13:34:12.432 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 13:34:12.432 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 13:34:12.432 [t1] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 13:34:12.432 [t1] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 13:34:12.432 [t1] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 13:34:12.432 [t1] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 13:34:12.433 [t1] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 13:34:12.433 [t1] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 13:34:12.433 [t1] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 13:34:12.433 [t1] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 13:34:12.433 [t1] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 13:34:12.433 [t1] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 13:34:12.433 [t1] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 13:34:12.434 [t1] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 13:34:12.434 [t1] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 13:34:12.434 [t1] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 13:34:12.434 [t1] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 13:34:12.434 [t1] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 13:34:12.434 [t1] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 13:34:12.434 [t1] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 13:34:12.434 [t1] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 13:34:12.434 [t1] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 13:34:12.434 [t1] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 13:34:12.434 [t1] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 13:34:12.434 [t1] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 13:34:12.434 [t1] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 13:34:12.434 [t1] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 13:34:12.435 [t1] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 13:34:12.435 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 13:34:12.660 [t1] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@52b8287e
2023-11-05 13:34:12.661 [t1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 13:34:12.664 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1862949408 wrapping com.mysql.cj.jdbc.ConnectionImpl@52b8287e] for JDBC transaction
2023-11-05 13:34:12.667 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1862949408 wrapping com.mysql.cj.jdbc.ConnectionImpl@52b8287e] to 1
2023-11-05 13:34:12.667 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1862949408 wrapping com.mysql.cj.jdbc.ConnectionImpl@52b8287e] to manual commit
2023-11-05 13:34:12.669 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程开启事务
2023-11-05 13:34:12.674 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@79cee442
2023-11-05 13:34:12.674 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@1695988697 wrapping com.mysql.cj.jdbc.ConnectionImpl@79cee442] for JDBC transaction
2023-11-05 13:34:12.674 [t2] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Changing isolation level of JDBC Connection [HikariProxyConnection@1695988697 wrapping com.mysql.cj.jdbc.ConnectionImpl@79cee442] to 4
2023-11-05 13:34:12.674 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@1695988697 wrapping com.mysql.cj.jdbc.ConnectionImpl@79cee442] to manual commit
2023-11-05 13:34:12.675 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程开启事务
2023-11-05 13:34:12.700 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@58dc1136
2023-11-05 13:34:12.704 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 13:34:12.704 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 13:34:12.731 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5c92ad4b
2023-11-05 13:34:12.734 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 13:34:12.737 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 13:34:12.739 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 13:34:12.739 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 13:34:12.742 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了11条数据
2023-11-05 13:34:12.761 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@51ce4fea
2023-11-05 13:34:12.768 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before cleanup stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 13:34:12.768 [HikariPool-1 housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After cleanup  stats (total=5, active=2, idle=3, waiting=0)
2023-11-05 13:34:12.793 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6344983
2023-11-05 13:34:12.825 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@693f5486
2023-11-05 13:34:12.856 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5bafb575
2023-11-05 13:34:12.887 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@f81c4d1
2023-11-05 13:34:12.919 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@48be4d0a
2023-11-05 13:34:12.950 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@43a1581c
2023-11-05 13:34:12.980 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@751002f0
2023-11-05 13:34:13.013 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1059e29f
2023-11-05 13:34:13.046 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3500e91c
2023-11-05 13:34:13.079 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4ebddef3
2023-11-05 13:34:13.109 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1e25d070
2023-11-05 13:34:13.139 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@25a045fa
2023-11-05 13:34:13.168 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@21f2bbe7
2023-11-05 13:34:13.200 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3bdf4953
2023-11-05 13:34:13.243 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3c6eed2e
2023-11-05 13:34:13.262 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5bee0f04
2023-11-05 13:34:13.293 [HikariPool-1 connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@22f504db
2023-11-05 13:34:13.680 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 13:34:13.682 [t1] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO posts (title, content) VALUES (?, ?)]
2023-11-05 13:34:13.685 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程插入数据成功
2023-11-05 13:34:13.686 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 13:34:13.687 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@1862949408 wrapping com.mysql.cj.jdbc.ConnectionImpl@52b8287e]
2023-11-05 13:34:13.702 [t1] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Resetting isolation level of JDBC Connection [HikariProxyConnection@1862949408 wrapping com.mysql.cj.jdbc.ConnectionImpl@52b8287e] to 4
2023-11-05 13:34:13.703 [t1] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1862949408 wrapping com.mysql.cj.jdbc.ConnectionImpl@52b8287e] after transaction
2023-11-05 13:34:13.707 [t1] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t1线程事务提交成功
2023-11-05 13:34:15.753 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL query
2023-11-05 13:34:15.753 [t2] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [SELECT * FROM posts WHERE title = ?]
2023-11-05 13:34:15.754 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type 'int'
2023-11-05 13:34:15.754 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'title' to property 'title' of type 'java.lang.String'
2023-11-05 13:34:15.754 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'content' to property 'content' of type 'java.lang.String'
2023-11-05 13:34:15.754 [t2] DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'published_at' to property 'published_at' of type 'java.util.Date'
2023-11-05 13:34:15.757 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程查询到了11条数据
2023-11-05 13:34:15.759 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2023-11-05 13:34:15.759 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [HikariProxyConnection@1695988697 wrapping com.mysql.cj.jdbc.ConnectionImpl@79cee442]
2023-11-05 13:34:15.760 [t2] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@1695988697 wrapping com.mysql.cj.jdbc.ConnectionImpl@79cee442] after transaction
2023-11-05 13:34:15.760 [t2] INFO  com.zhouyf.service.impl.BlogServicePhantomRead - t2线程执行正常，事务提交
2023-11-05 13:34:15.761 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 13:34:15.762 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 13:34:15.762 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [PhantomReadTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 13:34:15.765 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@bc57b40 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 13:34:15.765 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [PhantomReadTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 13:34:15.767 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 13:34:12 CST 2023
2023-11-05 13:34:15.768 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 13:34:15.769 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=22, active=0, idle=22, waiting=0)
2023-11-05 13:34:15.770 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@52b8287e: (connection evicted)
2023-11-05 13:34:15.771 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@79cee442: (connection evicted)
2023-11-05 13:34:15.771 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@58dc1136: (connection evicted)
2023-11-05 13:34:15.772 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5c92ad4b: (connection evicted)
2023-11-05 13:34:15.772 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@51ce4fea: (connection evicted)
2023-11-05 13:34:15.772 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@6344983: (connection evicted)
2023-11-05 13:34:15.773 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@693f5486: (connection evicted)
2023-11-05 13:34:15.773 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5bafb575: (connection evicted)
2023-11-05 13:34:15.773 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@f81c4d1: (connection evicted)
2023-11-05 13:34:15.773 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@48be4d0a: (connection evicted)
2023-11-05 13:34:15.774 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@43a1581c: (connection evicted)
2023-11-05 13:34:15.774 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@751002f0: (connection evicted)
2023-11-05 13:34:15.774 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1059e29f: (connection evicted)
2023-11-05 13:34:15.774 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3500e91c: (connection evicted)
2023-11-05 13:34:15.775 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@4ebddef3: (connection evicted)
2023-11-05 13:34:15.775 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@1e25d070: (connection evicted)
2023-11-05 13:34:15.775 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@25a045fa: (connection evicted)
2023-11-05 13:34:15.776 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@21f2bbe7: (connection evicted)
2023-11-05 13:34:15.776 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3bdf4953: (connection evicted)
2023-11-05 13:34:15.776 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@3c6eed2e: (connection evicted)
2023-11-05 13:34:15.776 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@5bee0f04: (connection evicted)
2023-11-05 13:34:15.777 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@22f504db: (connection evicted)
2023-11-05 13:34:15.777 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 13:34:15.777 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 16:01:59.352 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [UserCreateServiceTest]: []
2023-11-05 16:01:59.362 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 16:01:59.380 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [UserCreateServiceTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 16:01:59.381 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:01:59.391 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:01:59.391 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:01:59.416 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 16:01:59.417 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.HikariDataSourceConfig, com.zhouyf.config.TransactionConfig]
2023-11-05 16:01:59.445 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 16:01:59.458 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 16:01:59.505 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserCreateService.class]
2023-11-05 16:01:59.506 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserServiceImpl.class]
2023-11-05 16:01:59.506 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserSettingsServiceImpl.class]
2023-11-05 16:01:59.576 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 16:01:59.579 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 16:01:59.580 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 16:01:59.585 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 16:01:59.594 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:01:59.598 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:01:59.598 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:01:59.599 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:01:59.599 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:01:59.602 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:01:59.603 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:01:59.604 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:01:59.604 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:01:59.604 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:01:59.605 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 16:01:59.605 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userCreateService'
2023-11-05 16:01:59.610 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userSettingsServiceImpl'
2023-11-05 16:01:59.611 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 16:01:59.615 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 16:01:59.616 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 16:01:59.628 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userServiceImpl'
2023-11-05 16:01:59.628 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 16:01:59.630 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 16:01:59.644 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 16:01:59.646 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 16:01:59.650 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:01:59.654 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 16:01:59.655 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 16:01:59.658 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 16:01:59.658 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO user (id, username, password) VALUES (?, ?, ?)]
2023-11-05 16:01:59.661 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 16:01:59.661 [main] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 16:01:59.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 16:01:59.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 16:01:59.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 16:01:59.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 16:01:59.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 16:01:59.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 16:01:59.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 16:01:59.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 16:01:59.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 16:01:59.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 16:01:59.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 16:01:59.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 16:01:59.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 16:01:59.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 16:01:59.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 16:01:59.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 16:01:59.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 16:01:59.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 16:01:59.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 16:01:59.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 16:01:59.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 16:01:59.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 16:01:59.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 16:01:59.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 16:01:59.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 16:01:59.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 16:01:59.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 16:01:59.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 16:01:59.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 16:01:59.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 16:01:59.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 16:01:59.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 16:01:59.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 16:01:59.667 [main] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 16:01:59.667 [main] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 16:01:59.667 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 16:01:59.894 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@776802b0
2023-11-05 16:01:59.895 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 16:01:59.907 [main] DEBUG o.springframework.jdbc.core.StatementCreatorUtils - JDBC getParameterType call failed - using fallback method instead: java.sql.SQLException: Parameter metadata not available for the given statement
2023-11-05 16:01:59.924 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 16:01:59.926 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 16:01:59.927 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:01:59.936 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 16:01:59.937 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:01:59.939 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 16:01:59 CST 2023
2023-11-05 16:01:59.940 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 16:01:59.940 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 16:01:59.941 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@776802b0: (connection evicted)
2023-11-05 16:01:59.942 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 16:01:59.942 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 16:02:43.297 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [UserCreateServiceTest]: []
2023-11-05 16:02:43.304 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 16:02:43.313 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [UserCreateServiceTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 16:02:43.315 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:02:43.324 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:02:43.324 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:02:43.356 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 16:02:43.356 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.HikariDataSourceConfig, com.zhouyf.config.TransactionConfig]
2023-11-05 16:02:43.390 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 16:02:43.400 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 16:02:43.456 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserCreateService.class]
2023-11-05 16:02:43.456 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserServiceImpl.class]
2023-11-05 16:02:43.457 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserSettingsServiceImpl.class]
2023-11-05 16:02:43.527 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 16:02:43.528 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 16:02:43.530 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 16:02:43.533 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 16:02:43.540 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:02:43.542 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:02:43.542 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:02:43.542 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:02:43.542 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:02:43.545 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:02:43.545 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:02:43.546 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:02:43.546 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:02:43.546 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:02:43.546 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 16:02:43.547 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userCreateService'
2023-11-05 16:02:43.550 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userSettingsServiceImpl'
2023-11-05 16:02:43.551 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 16:02:43.554 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 16:02:43.555 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 16:02:43.566 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userServiceImpl'
2023-11-05 16:02:43.567 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 16:02:43.568 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 16:02:43.579 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 16:02:43.580 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 16:02:43.583 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:02:43.586 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 16:02:43.587 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 16:02:43.589 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 16:02:43.591 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO user (id, username, password) VALUES (?, ?, ?)]
2023-11-05 16:02:43.592 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 16:02:43.592 [main] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 16:02:43.595 [main] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 16:02:43.595 [main] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 16:02:43.595 [main] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 16:02:43.595 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 16:02:43.595 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 16:02:43.595 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 16:02:43.595 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 16:02:43.596 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 16:02:43.596 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 16:02:43.596 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 16:02:43.596 [main] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 16:02:43.596 [main] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 16:02:43.596 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 16:02:43.596 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 16:02:43.596 [main] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 16:02:43.597 [main] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 16:02:43.597 [main] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 16:02:43.597 [main] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 16:02:43.597 [main] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 16:02:43.597 [main] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 16:02:43.597 [main] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 16:02:43.597 [main] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 16:02:43.597 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 16:02:43.598 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 16:02:43.598 [main] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 16:02:43.598 [main] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 16:02:43.598 [main] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 16:02:43.598 [main] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 16:02:43.598 [main] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 16:02:43.598 [main] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 16:02:43.598 [main] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 16:02:43.598 [main] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 16:02:43.598 [main] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 16:02:43.598 [main] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 16:02:43.598 [main] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 16:02:43.598 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 16:02:43.829 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@776802b0
2023-11-05 16:02:43.830 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 16:02:43.853 [main] INFO  com.zhouyf.service.impl.UserServiceImpl - 用户创建成功
2023-11-05 16:02:43.854 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 16:02:43.854 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO usersettings (userId, theme) VALUES (?, ?)]
2023-11-05 16:02:43.854 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 16:02:43.860 [main] INFO  com.zhouyf.service.impl.UserServiceImpl - 用户设置保存成功
2023-11-05 16:02:43.861 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 16:02:43.862 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 16:02:43.862 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:02:43.866 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 16:02:43.866 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:02:43.869 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 16:02:43 CST 2023
2023-11-05 16:02:43.870 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 16:02:43.870 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 16:02:43.871 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@776802b0: (connection evicted)
2023-11-05 16:02:43.872 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 16:02:43.872 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 16:06:22.230 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [UserCreateServiceTest]: []
2023-11-05 16:06:22.237 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 16:06:22.246 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [UserCreateServiceTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 16:06:22.247 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:06:22.256 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:06:22.257 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:06:22.281 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 16:06:22.282 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.HikariDataSourceConfig, com.zhouyf.config.TransactionConfig]
2023-11-05 16:06:22.308 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 16:06:22.319 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 16:06:22.364 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserCreateService.class]
2023-11-05 16:06:22.365 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserServiceImpl.class]
2023-11-05 16:06:22.365 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserSettingsServiceImpl.class]
2023-11-05 16:06:22.435 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 16:06:22.440 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 16:06:22.441 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 16:06:22.447 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 16:06:22.457 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:06:22.461 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:06:22.462 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:06:22.462 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:06:22.462 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:06:22.466 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:06:22.467 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:06:22.467 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:06:22.468 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:06:22.468 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:06:22.468 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 16:06:22.469 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userCreateService'
2023-11-05 16:06:22.472 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userSettingsServiceImpl'
2023-11-05 16:06:22.474 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 16:06:22.477 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 16:06:22.478 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 16:06:22.489 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userServiceImpl'
2023-11-05 16:06:22.490 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 16:06:22.491 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 16:06:22.506 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 16:06:22.507 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 16:06:22.510 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:06:22.514 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 16:06:22.516 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 16:06:22.519 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 16:06:22.520 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO user (id, username, password) VALUES (?, ?, ?)]
2023-11-05 16:06:22.521 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 16:06:22.522 [main] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 16:06:22.525 [main] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 16:06:22.525 [main] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 16:06:22.526 [main] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 16:06:22.526 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 16:06:22.526 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 16:06:22.526 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 16:06:22.526 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 16:06:22.526 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 16:06:22.526 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 16:06:22.527 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 16:06:22.527 [main] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 16:06:22.527 [main] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 16:06:22.527 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 16:06:22.527 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 16:06:22.527 [main] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 16:06:22.527 [main] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 16:06:22.527 [main] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 16:06:22.527 [main] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 16:06:22.527 [main] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 16:06:22.528 [main] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 16:06:22.528 [main] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 16:06:22.528 [main] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 16:06:22.528 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 16:06:22.528 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 16:06:22.528 [main] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 16:06:22.528 [main] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 16:06:22.528 [main] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 16:06:22.528 [main] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 16:06:22.528 [main] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 16:06:22.528 [main] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 16:06:22.528 [main] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 16:06:22.528 [main] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 16:06:22.528 [main] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 16:06:22.528 [main] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 16:06:22.528 [main] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 16:06:22.528 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 16:06:22.766 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@776802b0
2023-11-05 16:06:22.768 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 16:06:22.797 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 16:06:22.798 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 16:06:22.798 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:06:22.810 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 16:06:22.810 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:06:22.813 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 16:06:22 CST 2023
2023-11-05 16:06:22.814 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 16:06:22.814 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 16:06:22.815 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@776802b0: (connection evicted)
2023-11-05 16:06:22.816 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 16:06:22.816 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 16:08:41.180 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [UserCreateServiceTest]: []
2023-11-05 16:08:41.187 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 16:08:41.196 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [UserCreateServiceTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 16:08:41.197 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:08:41.205 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:08:41.206 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:08:41.239 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 16:08:41.239 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.HikariDataSourceConfig, com.zhouyf.config.TransactionConfig]
2023-11-05 16:08:41.261 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 16:08:41.270 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 16:08:41.314 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserCreateService.class]
2023-11-05 16:08:41.315 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserServiceImpl.class]
2023-11-05 16:08:41.315 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserSettingsServiceImpl.class]
2023-11-05 16:08:41.394 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 16:08:41.397 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 16:08:41.399 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 16:08:41.402 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 16:08:41.410 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:08:41.412 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:08:41.412 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:08:41.412 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:08:41.412 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:08:41.415 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:08:41.416 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:08:41.416 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:08:41.416 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:08:41.417 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:08:41.417 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 16:08:41.418 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userCreateService'
2023-11-05 16:08:41.420 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userSettingsServiceImpl'
2023-11-05 16:08:41.421 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 16:08:41.425 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 16:08:41.427 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 16:08:41.440 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userServiceImpl'
2023-11-05 16:08:41.441 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 16:08:41.442 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 16:08:41.460 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 16:08:41.461 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 16:08:41.463 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:08:41.467 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 16:08:41.468 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 16:08:41.472 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 16:08:41.472 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO user (id, username, password) VALUES (?, ?, ?)]
2023-11-05 16:08:41.473 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 16:08:41.474 [main] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 16:08:41.476 [main] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 16:08:41.477 [main] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 16:08:41.477 [main] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 16:08:41.477 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 16:08:41.477 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 16:08:41.477 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 16:08:41.477 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 16:08:41.477 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 16:08:41.477 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 16:08:41.477 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 16:08:41.478 [main] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 16:08:41.478 [main] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 16:08:41.478 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 16:08:41.478 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 16:08:41.478 [main] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 16:08:41.478 [main] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 16:08:41.478 [main] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 16:08:41.478 [main] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 16:08:41.478 [main] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 16:08:41.478 [main] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 16:08:41.478 [main] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 16:08:41.478 [main] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 16:08:41.478 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 16:08:41.478 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 16:08:41.478 [main] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 16:08:41.479 [main] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 16:08:41.479 [main] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 16:08:41.479 [main] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 16:08:41.479 [main] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 16:08:41.479 [main] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 16:08:41.479 [main] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 16:08:41.479 [main] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 16:08:41.479 [main] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 16:08:41.479 [main] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 16:08:41.479 [main] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 16:08:41.479 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 16:08:41.724 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@51d143a1
2023-11-05 16:08:41.725 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 16:08:41.755 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 16:08:41.757 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 16:08:41.758 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:08:41.765 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 16:08:41.766 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:08:41.769 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 16:08:41 CST 2023
2023-11-05 16:08:41.769 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 16:08:41.769 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 16:08:41.770 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@51d143a1: (connection evicted)
2023-11-05 16:08:41.771 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 16:08:41.771 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 16:09:24.385 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [UserCreateServiceTest]: []
2023-11-05 16:09:24.393 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 16:09:24.405 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [UserCreateServiceTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 16:09:24.407 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:09:24.414 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:09:24.414 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:09:24.438 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 16:09:24.440 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.HikariDataSourceConfig, com.zhouyf.config.TransactionConfig]
2023-11-05 16:09:24.467 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 16:09:24.475 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 16:09:24.527 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserCreateService.class]
2023-11-05 16:09:24.527 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserServiceImpl.class]
2023-11-05 16:09:24.528 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserSettingsServiceImpl.class]
2023-11-05 16:09:24.614 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 16:09:24.618 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 16:09:24.619 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 16:09:24.624 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 16:09:24.633 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:09:24.635 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:09:24.635 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:09:24.635 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:09:24.636 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:09:24.638 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:09:24.639 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:09:24.640 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:09:24.640 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:09:24.640 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:09:24.640 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 16:09:24.641 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userCreateService'
2023-11-05 16:09:24.643 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userSettingsServiceImpl'
2023-11-05 16:09:24.644 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 16:09:24.648 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 16:09:24.650 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 16:09:24.662 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userServiceImpl'
2023-11-05 16:09:24.662 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 16:09:24.663 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 16:09:24.679 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 16:09:24.681 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 16:09:24.685 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:09:24.689 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 16:09:24.690 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 16:09:24.692 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 16:09:24.693 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO user (id, username, password) VALUES (?, ?, ?)]
2023-11-05 16:09:24.694 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 16:09:24.694 [main] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 16:09:24.697 [main] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 16:09:24.697 [main] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 16:09:24.697 [main] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 16:09:24.697 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 16:09:24.697 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 16:09:24.697 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 16:09:24.698 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 16:09:24.698 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 16:09:24.698 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 16:09:24.699 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 16:09:24.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 16:09:24.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 16:09:24.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 16:09:24.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 16:09:24.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 16:09:24.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 16:09:24.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 16:09:24.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 16:09:24.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 16:09:24.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 16:09:24.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 16:09:24.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 16:09:24.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 16:09:24.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 16:09:24.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 16:09:24.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 16:09:24.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 16:09:24.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 16:09:24.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 16:09:24.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 16:09:24.702 [main] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 16:09:24.702 [main] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 16:09:24.702 [main] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 16:09:24.702 [main] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 16:09:24.702 [main] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 16:09:24.702 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 16:09:24.937 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@51d143a1
2023-11-05 16:09:24.939 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 16:09:24.967 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 16:09:24.968 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 16:09:24.968 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:09:24.976 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 16:09:24.976 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:09:24.978 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 16:09:24 CST 2023
2023-11-05 16:09:24.979 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 16:09:24.979 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 16:09:24.980 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@51d143a1: (connection evicted)
2023-11-05 16:09:24.981 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 16:09:24.981 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 16:41:30.134 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [UserCreateServiceTest]: []
2023-11-05 16:41:30.142 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 16:41:30.150 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [UserCreateServiceTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 16:41:30.153 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:41:30.162 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:41:30.163 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:41:30.190 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 16:41:30.191 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.HikariDataSourceConfig, com.zhouyf.config.TransactionConfig]
2023-11-05 16:41:30.212 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 16:41:30.219 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 16:41:30.261 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserCreateService.class]
2023-11-05 16:41:30.262 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserServiceImpl.class]
2023-11-05 16:41:30.262 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserSettingsServiceImpl.class]
2023-11-05 16:41:30.336 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 16:41:30.339 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 16:41:30.340 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 16:41:30.345 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 16:41:30.353 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:41:30.354 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:41:30.355 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:41:30.355 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:41:30.355 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:41:30.358 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:41:30.359 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:41:30.359 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:41:30.359 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:41:30.359 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:41:30.359 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 16:41:30.360 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userCreateService'
2023-11-05 16:41:30.362 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userSettingsServiceImpl'
2023-11-05 16:41:30.363 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 16:41:30.366 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 16:41:30.368 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 16:41:30.380 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userServiceImpl'
2023-11-05 16:41:30.381 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 16:41:30.382 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 16:41:30.398 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 16:41:30.401 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 16:41:30.405 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:41:30.409 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 16:41:30.410 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 16:41:30.412 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 16:41:30.413 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO user (id, username, password) VALUES (?, ?, ?)]
2023-11-05 16:41:30.415 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 16:41:30.415 [main] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 16:41:30.418 [main] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 16:41:30.418 [main] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 16:41:30.419 [main] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 16:41:30.419 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 16:41:30.419 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 16:41:30.419 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 16:41:30.419 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 16:41:30.419 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 16:41:30.419 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 16:41:30.419 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 16:41:30.419 [main] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 16:41:30.419 [main] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 16:41:30.419 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 16:41:30.420 [main] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 16:41:30.421 [main] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 16:41:30.421 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 16:41:30.651 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@51d143a1
2023-11-05 16:41:30.652 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 16:41:30.674 [main] INFO  com.zhouyf.service.impl.UserServiceImpl - 用户创建成功
2023-11-05 16:41:30.674 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 16:41:30.674 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO usersettings (userId, theme) VALUES (?, ?)]
2023-11-05 16:41:30.674 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 16:41:30.680 [main] INFO  com.zhouyf.service.impl.UserServiceImpl - 用户设置保存成功
2023-11-05 16:41:30.682 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 16:41:30.683 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 16:41:30.684 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:41:30.687 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 16:41:30.688 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:41:30.689 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 16:41:30 CST 2023
2023-11-05 16:41:30.690 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 16:41:30.690 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 16:41:30.691 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@51d143a1: (connection evicted)
2023-11-05 16:41:30.692 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 16:41:30.693 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 16:42:21.592 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [UserCreateServiceTest]: []
2023-11-05 16:42:21.602 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 16:42:21.612 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [UserCreateServiceTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 16:42:21.614 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:42:21.622 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:42:21.622 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:42:21.651 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 16:42:21.652 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.HikariDataSourceConfig, com.zhouyf.config.TransactionConfig]
2023-11-05 16:42:21.685 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 16:42:21.694 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 16:42:21.738 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserCreateService.class]
2023-11-05 16:42:21.738 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserServiceImpl.class]
2023-11-05 16:42:21.739 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserSettingsServiceImpl.class]
2023-11-05 16:42:21.814 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 16:42:21.818 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 16:42:21.819 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 16:42:21.824 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 16:42:21.830 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:42:21.832 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:42:21.832 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:42:21.833 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:42:21.833 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:42:21.835 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:42:21.836 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:42:21.836 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:42:21.837 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:42:21.837 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:42:21.837 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 16:42:21.838 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userCreateService'
2023-11-05 16:42:21.840 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userSettingsServiceImpl'
2023-11-05 16:42:21.840 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 16:42:21.843 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 16:42:21.845 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 16:42:21.856 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userServiceImpl'
2023-11-05 16:42:21.857 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 16:42:21.857 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 16:42:21.871 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 16:42:21.872 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 16:42:21.875 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:42:21.878 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 16:42:21.880 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 16:42:21.885 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 16:42:21.885 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO user (id, username, password) VALUES (?, ?, ?)]
2023-11-05 16:42:21.887 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 16:42:21.887 [main] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 16:42:21.889 [main] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 16:42:21.890 [main] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 16:42:21.890 [main] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 16:42:21.890 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 16:42:21.890 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 16:42:21.890 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 16:42:21.890 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 16:42:21.890 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 16:42:21.890 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 16:42:21.890 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 16:42:21.891 [main] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 16:42:21.891 [main] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 16:42:21.891 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 16:42:21.891 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 16:42:21.891 [main] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 16:42:21.891 [main] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 16:42:21.891 [main] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 16:42:21.892 [main] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 16:42:21.892 [main] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 16:42:21.892 [main] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 16:42:21.892 [main] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 16:42:21.892 [main] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 16:42:21.892 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 16:42:21.892 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 16:42:21.892 [main] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 16:42:21.893 [main] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 16:42:21.893 [main] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 16:42:21.893 [main] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 16:42:21.894 [main] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 16:42:21.894 [main] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 16:42:21.894 [main] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 16:42:21.894 [main] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 16:42:21.894 [main] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 16:42:21.894 [main] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 16:42:21.894 [main] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 16:42:21.894 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 16:42:22.116 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@51d143a1
2023-11-05 16:42:22.118 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 16:42:22.139 [main] INFO  com.zhouyf.service.impl.UserServiceImpl - 用户创建成功
2023-11-05 16:42:22.139 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 16:42:22.139 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO usersettings (userId, theme) VALUES (?, ?)]
2023-11-05 16:42:22.139 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 16:42:22.145 [main] DEBUG o.s.jdbc.support.SQLStateSQLExceptionTranslator - Extracted SQL state class 'S1' from value 'S1009'
2023-11-05 16:42:22.148 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 16:42:22.148 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 16:42:22.150 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:42:22.158 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@27eb3298 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 16:42:22.158 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:42:22.160 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 16:42:21 CST 2023
2023-11-05 16:42:22.161 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 16:42:22.161 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 16:42:22.162 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@51d143a1: (connection evicted)
2023-11-05 16:42:22.163 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 16:42:22.163 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 16:43:36.220 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [UserCreateServiceTest]: []
2023-11-05 16:43:36.230 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 16:43:36.238 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [UserCreateServiceTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 16:43:36.239 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:43:36.247 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:43:36.247 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:43:36.270 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 16:43:36.272 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.HikariDataSourceConfig, com.zhouyf.config.TransactionConfig]
2023-11-05 16:43:36.303 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 16:43:36.314 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 16:43:36.358 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserCreateService.class]
2023-11-05 16:43:36.358 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserServiceImpl.class]
2023-11-05 16:43:36.360 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserSettingsServiceImpl.class]
2023-11-05 16:43:36.428 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 16:43:36.433 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 16:43:36.434 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 16:43:36.439 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 16:43:36.449 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:43:36.453 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:43:36.453 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:43:36.453 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:43:36.453 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:43:36.456 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:43:36.457 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:43:36.457 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:43:36.457 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:43:36.458 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:43:36.458 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 16:43:36.458 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userCreateService'
2023-11-05 16:43:36.462 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userSettingsServiceImpl'
2023-11-05 16:43:36.463 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 16:43:36.467 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 16:43:36.469 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 16:43:36.479 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userServiceImpl'
2023-11-05 16:43:36.479 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 16:43:36.480 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 16:43:36.497 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 16:43:36.498 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 16:43:36.500 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:43:36.505 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 16:43:36.506 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 16:43:36.508 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 16:43:36.510 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO user (id, username, password) VALUES (?, ?, ?)]
2023-11-05 16:43:36.511 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 16:43:36.512 [main] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 16:43:36.514 [main] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 16:43:36.515 [main] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 16:43:36.515 [main] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 16:43:36.515 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 16:43:36.515 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 16:43:36.515 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 16:43:36.515 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 16:43:36.515 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 16:43:36.515 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 16:43:36.515 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 16:43:36.516 [main] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 16:43:36.516 [main] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 16:43:36.516 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 16:43:36.516 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 16:43:36.516 [main] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 16:43:36.516 [main] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 16:43:36.516 [main] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 16:43:36.516 [main] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 16:43:36.516 [main] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 16:43:36.516 [main] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 16:43:36.516 [main] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 16:43:36.517 [main] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 16:43:36.517 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 16:43:36.517 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 16:43:36.517 [main] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 16:43:36.517 [main] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 16:43:36.517 [main] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 16:43:36.517 [main] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 16:43:36.517 [main] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 16:43:36.517 [main] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 16:43:36.517 [main] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 16:43:36.517 [main] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 16:43:36.517 [main] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 16:43:36.517 [main] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 16:43:36.517 [main] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 16:43:36.517 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 16:43:36.741 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@776802b0
2023-11-05 16:43:36.742 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 16:43:36.763 [main] INFO  com.zhouyf.service.impl.UserServiceImpl - 用户创建成功
2023-11-05 16:43:36.763 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 16:43:36.763 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO usersettings (userId, theme) VALUES (?, ?)]
2023-11-05 16:43:36.763 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 16:43:36.769 [main] DEBUG o.s.jdbc.support.SQLStateSQLExceptionTranslator - Extracted SQL state class 'S1' from value 'S1009'
2023-11-05 16:43:36.774 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 16:43:36.775 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 16:43:36.775 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:43:36.782 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 16:43:36.782 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:43:36.784 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 16:43:36 CST 2023
2023-11-05 16:43:36.785 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 16:43:36.785 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 16:43:36.787 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@776802b0: (connection evicted)
2023-11-05 16:43:36.788 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 16:43:36.788 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 16:46:39.380 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [UserCreateServiceTest]: []
2023-11-05 16:46:39.390 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 16:46:39.398 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [UserCreateServiceTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 16:46:39.399 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:46:39.407 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:46:39.407 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:46:39.435 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 16:46:39.435 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.HikariDataSourceConfig, com.zhouyf.config.TransactionConfig]
2023-11-05 16:46:39.471 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 16:46:39.480 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 16:46:39.531 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserCreateService.class]
2023-11-05 16:46:39.532 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserServiceImpl.class]
2023-11-05 16:46:39.533 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserSettingsServiceImpl.class]
2023-11-05 16:46:39.606 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 16:46:39.610 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 16:46:39.611 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 16:46:39.617 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 16:46:39.626 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:46:39.628 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:46:39.628 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:46:39.628 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:46:39.628 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:46:39.633 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:46:39.634 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:46:39.634 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:46:39.634 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:46:39.635 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:46:39.635 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 16:46:39.635 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userCreateService'
2023-11-05 16:46:39.639 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userSettingsServiceImpl'
2023-11-05 16:46:39.640 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 16:46:39.644 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 16:46:39.646 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 16:46:39.658 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userServiceImpl'
2023-11-05 16:46:39.659 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 16:46:39.661 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 16:46:39.679 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 16:46:39.680 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 16:46:39.684 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:46:39.688 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 16:46:39.690 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 16:46:39.692 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 16:46:39.693 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO user (id, username, password) VALUES (?, ?, ?)]
2023-11-05 16:46:39.695 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 16:46:39.696 [main] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 16:46:39.699 [main] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 16:46:39.699 [main] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 16:46:39.699 [main] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 16:46:39.699 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 16:46:39.699 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 16:46:39.699 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 16:46:39.699 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 16:46:39.699 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 16:46:39.699 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 16:46:39.699 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 16:46:39.699 [main] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 16:46:39.699 [main] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 16:46:39.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 16:46:39.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 16:46:39.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 16:46:39.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 16:46:39.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 16:46:39.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 16:46:39.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 16:46:39.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 16:46:39.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 16:46:39.700 [main] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 16:46:39.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 16:46:39.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 16:46:39.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 16:46:39.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 16:46:39.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 16:46:39.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 16:46:39.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 16:46:39.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 16:46:39.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 16:46:39.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 16:46:39.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 16:46:39.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 16:46:39.701 [main] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 16:46:39.701 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 16:46:39.928 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@776802b0
2023-11-05 16:46:39.929 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 16:46:39.952 [main] INFO  com.zhouyf.service.impl.UserServiceImpl - 用户创建成功
2023-11-05 16:46:39.953 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 16:46:39.953 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO usersettings (userId, theme) VALUES (?, ?)]
2023-11-05 16:46:39.953 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 16:46:39.962 [main] DEBUG o.s.jdbc.support.SQLStateSQLExceptionTranslator - Extracted SQL state class 'S1' from value 'S1009'
2023-11-05 16:46:39.965 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 16:46:39.966 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 16:46:39.966 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:46:39.975 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 16:46:39.976 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:46:39.978 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 16:46:39 CST 2023
2023-11-05 16:46:39.978 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 16:46:39.978 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 16:46:39.980 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@776802b0: (connection evicted)
2023-11-05 16:46:39.981 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 16:46:39.982 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 16:57:33.373 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [UserCreateServiceTest]: []
2023-11-05 16:57:33.382 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 16:57:33.394 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [UserCreateServiceTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 16:57:33.395 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:57:33.403 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:57:33.403 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 16:57:33.431 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 16:57:33.432 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.HikariDataSourceConfig, com.zhouyf.config.TransactionConfig]
2023-11-05 16:57:33.454 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 16:57:33.461 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 16:57:33.507 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserCreateService.class]
2023-11-05 16:57:33.507 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserServiceImpl.class]
2023-11-05 16:57:33.508 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserSettingsServiceImpl.class]
2023-11-05 16:57:33.587 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 16:57:33.590 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 16:57:33.592 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 16:57:33.598 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 16:57:33.605 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:57:33.607 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:57:33.607 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:57:33.607 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:57:33.607 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:57:33.610 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:57:33.611 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:57:33.611 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:57:33.611 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:57:33.611 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 16:57:33.612 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 16:57:33.612 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userCreateService'
2023-11-05 16:57:33.615 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userSettingsServiceImpl'
2023-11-05 16:57:33.616 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 16:57:33.620 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 16:57:33.622 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 16:57:33.632 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userServiceImpl'
2023-11-05 16:57:33.633 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 16:57:33.634 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 16:57:33.648 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 16:57:33.649 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 16:57:33.652 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:57:33.655 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 16:57:33.656 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 16:57:33.659 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 16:57:33.659 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO user (id, username, password) VALUES (?, ?, ?)]
2023-11-05 16:57:33.661 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 16:57:33.662 [main] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 16:57:33.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 16:57:33.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 16:57:33.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 16:57:33.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 16:57:33.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 16:57:33.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 16:57:33.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 16:57:33.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 16:57:33.664 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 16:57:33.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 16:57:33.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 16:57:33.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 16:57:33.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 16:57:33.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 16:57:33.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 16:57:33.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 16:57:33.665 [main] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 16:57:33.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 16:57:33.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 16:57:33.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 16:57:33.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 16:57:33.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 16:57:33.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 16:57:33.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 16:57:33.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 16:57:33.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 16:57:33.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 16:57:33.666 [main] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 16:57:33.667 [main] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 16:57:33.667 [main] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 16:57:33.667 [main] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 16:57:33.667 [main] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 16:57:33.667 [main] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 16:57:33.667 [main] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 16:57:33.667 [main] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 16:57:33.667 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 16:57:33.891 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@776802b0
2023-11-05 16:57:33.892 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 16:57:33.914 [main] INFO  com.zhouyf.service.impl.UserServiceImpl - 用户创建成功
2023-11-05 16:57:33.915 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 16:57:33.915 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO usersettings (userId, theme) VALUES (?, ?)]
2023-11-05 16:57:33.915 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 16:57:33.921 [main] DEBUG o.s.jdbc.support.SQLStateSQLExceptionTranslator - Extracted SQL state class 'S1' from value 'S1009'
2023-11-05 16:57:33.924 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 16:57:33.925 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 16:57:33.925 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:57:33.933 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@16afbd92 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 16:57:33.933 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 16:57:33.936 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 16:57:33 CST 2023
2023-11-05 16:57:33.937 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 16:57:33.937 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 16:57:33.938 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@776802b0: (connection evicted)
2023-11-05 16:57:33.939 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 16:57:33.939 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 17:39:19.563 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [UserCreateServiceTest]: []
2023-11-05 17:39:19.570 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 17:39:19.579 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [UserCreateServiceTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 17:39:19.580 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 17:39:19.590 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 17:39:19.591 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 17:39:19.616 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 17:39:19.616 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.HikariDataSourceConfig, com.zhouyf.config.TransactionConfig]
2023-11-05 17:39:19.644 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 17:39:19.653 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 17:39:19.700 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserCreateService.class]
2023-11-05 17:39:19.701 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserServiceImpl.class]
2023-11-05 17:39:19.701 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserSettingsServiceImpl.class]
2023-11-05 17:39:19.793 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 17:39:19.794 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 17:39:19.795 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2023-11-05 17:39:19.798 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 17:39:19.799 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2023-11-05 17:39:19.820 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 17:39:19.826 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:19.826 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:19.826 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:19.827 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:19.827 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:19.830 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:19.830 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:19.831 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:19.831 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:19.831 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:19.832 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2023-11-05 17:39:19.832 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration'
2023-11-05 17:39:19.838 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionAttributeSource'
2023-11-05 17:39:19.839 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionInterceptor'
2023-11-05 17:39:19.839 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionInterceptor' via factory method to bean named 'transactionAttributeSource'
2023-11-05 17:39:19.843 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'org.springframework.transaction.config.internalTransactionAdvisor' via factory method to bean named 'transactionAttributeSource'
2023-11-05 17:39:19.843 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'org.springframework.transaction.config.internalTransactionAdvisor' via factory method to bean named 'transactionInterceptor'
2023-11-05 17:39:19.846 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 17:39:19.847 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userCreateService'
2023-11-05 17:39:19.849 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userSettingsServiceImpl'
2023-11-05 17:39:19.849 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 17:39:19.853 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 17:39:19.855 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 17:39:19.878 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userServiceImpl'
2023-11-05 17:39:19.891 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 17:39:19.891 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 17:39:19.902 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 17:39:19.903 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 17:39:19.905 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 17:39:19.909 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 17:39:19.910 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 17:39:19.916 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [com.zhouyf.service.impl.UserCreateService.createUserWithDefaultSettings]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2023-11-05 17:39:19.917 [main] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 17:39:19.919 [main] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 17:39:19.919 [main] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 17:39:19.919 [main] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 17:39:19.919 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 17:39:19.919 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 17:39:19.919 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 17:39:19.919 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 17:39:19.919 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 17:39:19.919 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 17:39:19.920 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 17:39:19.920 [main] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 17:39:19.920 [main] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 17:39:19.920 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 17:39:19.920 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 17:39:19.920 [main] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 17:39:19.920 [main] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 17:39:19.920 [main] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 17:39:19.921 [main] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 17:39:19.921 [main] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 17:39:19.921 [main] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 17:39:19.921 [main] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 17:39:19.921 [main] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 17:39:19.921 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 17:39:19.921 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 17:39:19.921 [main] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 17:39:19.921 [main] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 17:39:19.921 [main] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 17:39:19.921 [main] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 17:39:19.921 [main] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 17:39:19.922 [main] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 17:39:19.922 [main] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 17:39:19.922 [main] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 17:39:19.922 [main] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 17:39:19.922 [main] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 17:39:19.922 [main] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 17:39:19.922 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 17:39:20.150 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@c6da8bb
2023-11-05 17:39:20.152 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 17:39:20.154 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@2142450580 wrapping com.mysql.cj.jdbc.ConnectionImpl@c6da8bb] for JDBC transaction
2023-11-05 17:39:20.156 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@2142450580 wrapping com.mysql.cj.jdbc.ConnectionImpl@c6da8bb] to manual commit
2023-11-05 17:39:20.158 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 17:39:20.158 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO user (id, username, password) VALUES (?, ?, ?)]
2023-11-05 17:39:20.171 [main] INFO  com.zhouyf.service.impl.UserServiceImpl - 用户创建成功
2023-11-05 17:39:20.172 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 17:39:20.172 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO usersettings (userId, theme) VALUES (?, ?)]
2023-11-05 17:39:20.182 [main] DEBUG o.s.jdbc.support.SQLStateSQLExceptionTranslator - Extracted SQL state class 'S1' from value 'S1009'
2023-11-05 17:39:20.183 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction rollback
2023-11-05 17:39:20.183 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Rolling back JDBC transaction on Connection [HikariProxyConnection@2142450580 wrapping com.mysql.cj.jdbc.ConnectionImpl@c6da8bb]
2023-11-05 17:39:20.188 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@2142450580 wrapping com.mysql.cj.jdbc.ConnectionImpl@c6da8bb] after transaction
2023-11-05 17:39:20.189 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 17:39:20.190 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 17:39:20.190 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 17:39:20.198 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 17:39:20.199 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 17:39:20.201 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 17:39:19 CST 2023
2023-11-05 17:39:20.202 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 17:39:20.202 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 17:39:20.203 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@c6da8bb: (connection evicted)
2023-11-05 17:39:20.204 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 17:39:20.205 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 17:39:49.589 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [UserCreateServiceTest]: []
2023-11-05 17:39:49.602 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 17:39:49.611 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [UserCreateServiceTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 17:39:49.613 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 17:39:49.624 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 17:39:49.624 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 17:39:49.649 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 17:39:49.650 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.HikariDataSourceConfig, com.zhouyf.config.TransactionConfig]
2023-11-05 17:39:49.692 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 17:39:49.701 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 17:39:49.764 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserCreateService.class]
2023-11-05 17:39:49.765 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserServiceImpl.class]
2023-11-05 17:39:49.765 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserSettingsServiceImpl.class]
2023-11-05 17:39:49.842 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 17:39:49.843 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 17:39:49.844 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2023-11-05 17:39:49.846 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 17:39:49.847 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2023-11-05 17:39:49.863 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 17:39:49.867 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:49.867 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:49.867 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:49.868 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:49.868 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:49.871 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:49.872 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:49.872 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:49.872 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:49.872 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 17:39:49.873 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2023-11-05 17:39:49.873 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration'
2023-11-05 17:39:49.879 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionAttributeSource'
2023-11-05 17:39:49.881 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionInterceptor'
2023-11-05 17:39:49.881 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionInterceptor' via factory method to bean named 'transactionAttributeSource'
2023-11-05 17:39:49.884 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'org.springframework.transaction.config.internalTransactionAdvisor' via factory method to bean named 'transactionAttributeSource'
2023-11-05 17:39:49.884 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'org.springframework.transaction.config.internalTransactionAdvisor' via factory method to bean named 'transactionInterceptor'
2023-11-05 17:39:49.887 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 17:39:49.888 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userCreateService'
2023-11-05 17:39:49.889 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userSettingsServiceImpl'
2023-11-05 17:39:49.890 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 17:39:49.893 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 17:39:49.895 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 17:39:49.916 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userServiceImpl'
2023-11-05 17:39:49.917 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 17:39:49.917 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 17:39:49.933 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@50b0bc4c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 17:39:49.934 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@50b0bc4c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 17:39:49.937 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 17:39:49.940 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@50b0bc4c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 17:39:49.941 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@50b0bc4c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 17:39:49.944 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 17:39:49.944 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO user (id, username, password) VALUES (?, ?, ?)]
2023-11-05 17:39:49.946 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 17:39:49.946 [main] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 17:39:49.949 [main] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 17:39:49.949 [main] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 17:39:49.949 [main] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 17:39:49.949 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 17:39:49.949 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 17:39:49.949 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 17:39:49.949 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 17:39:49.949 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 17:39:49.949 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 17:39:49.951 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 17:39:49.951 [main] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 17:39:49.951 [main] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 17:39:49.951 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 17:39:49.951 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 17:39:49.951 [main] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 17:39:49.951 [main] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 17:39:49.951 [main] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 17:39:49.952 [main] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 17:39:49.952 [main] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 17:39:49.952 [main] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 17:39:49.952 [main] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 17:39:49.952 [main] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 17:39:49.952 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 17:39:49.952 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 17:39:49.952 [main] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 17:39:49.952 [main] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 17:39:49.952 [main] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 17:39:49.952 [main] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 17:39:49.952 [main] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 17:39:49.952 [main] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 17:39:49.952 [main] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 17:39:49.953 [main] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 17:39:49.953 [main] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 17:39:49.953 [main] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 17:39:49.953 [main] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 17:39:49.953 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 17:39:50.180 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7a8136b3
2023-11-05 17:39:50.181 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 17:39:50.201 [main] INFO  com.zhouyf.service.impl.UserServiceImpl - 用户创建成功
2023-11-05 17:39:50.201 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 17:39:50.201 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO usersettings (userId, theme) VALUES (?, ?)]
2023-11-05 17:39:50.201 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 17:39:50.208 [main] DEBUG o.s.jdbc.support.SQLStateSQLExceptionTranslator - Extracted SQL state class 'S1' from value 'S1009'
2023-11-05 17:39:50.210 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@50b0bc4c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 17:39:50.211 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@50b0bc4c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 17:39:50.212 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 17:39:50.222 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@50b0bc4c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 17:39:50.222 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 17:39:50.225 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 17:39:49 CST 2023
2023-11-05 17:39:50.225 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 17:39:50.225 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 17:39:50.226 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7a8136b3: (connection evicted)
2023-11-05 17:39:50.228 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 17:39:50.228 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 18:20:49.822 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [UserCreateServiceTest]: []
2023-11-05 18:20:49.832 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 18:20:49.841 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [UserCreateServiceTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 18:20:49.843 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 18:20:49.851 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 18:20:49.852 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 18:20:49.877 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 18:20:49.877 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.HikariDataSourceConfig, com.zhouyf.config.TransactionConfig]
2023-11-05 18:20:49.904 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 18:20:49.911 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 18:20:49.958 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserCreateService.class]
2023-11-05 18:20:49.959 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserServiceImpl.class]
2023-11-05 18:20:49.959 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserSettingsServiceImpl.class]
2023-11-05 18:20:50.046 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 18:20:50.048 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 18:20:50.048 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2023-11-05 18:20:50.054 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 18:20:50.055 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2023-11-05 18:20:50.078 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 18:20:50.083 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:20:50.084 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:20:50.084 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:20:50.084 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:20:50.085 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:20:50.088 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:20:50.088 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:20:50.089 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:20:50.089 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:20:50.089 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:20:50.089 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2023-11-05 18:20:50.089 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration'
2023-11-05 18:20:50.095 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionAttributeSource'
2023-11-05 18:20:50.096 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionInterceptor'
2023-11-05 18:20:50.097 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionInterceptor' via factory method to bean named 'transactionAttributeSource'
2023-11-05 18:20:50.099 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'org.springframework.transaction.config.internalTransactionAdvisor' via factory method to bean named 'transactionAttributeSource'
2023-11-05 18:20:50.100 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'org.springframework.transaction.config.internalTransactionAdvisor' via factory method to bean named 'transactionInterceptor'
2023-11-05 18:20:50.102 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 18:20:50.103 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userCreateService'
2023-11-05 18:20:50.105 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userSettingsServiceImpl'
2023-11-05 18:20:50.105 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 18:20:50.109 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 18:20:50.111 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 18:20:50.129 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userServiceImpl'
2023-11-05 18:20:50.142 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 18:20:50.143 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 18:20:50.154 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 18:20:50.155 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 18:20:50.157 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 18:20:50.160 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 18:20:50.161 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 18:20:50.166 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [com.zhouyf.service.impl.UserCreateService.createUserWithDefaultSettings]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2023-11-05 18:20:50.167 [main] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 18:20:50.170 [main] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 18:20:50.170 [main] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 18:20:50.170 [main] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 18:20:50.170 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 18:20:50.170 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 18:20:50.170 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 18:20:50.170 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 18:20:50.171 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 18:20:50.171 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 18:20:50.171 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 18:20:50.171 [main] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 18:20:50.171 [main] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 18:20:50.171 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 18:20:50.171 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 18:20:50.171 [main] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 18:20:50.171 [main] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 18:20:50.171 [main] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 18:20:50.171 [main] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 18:20:50.171 [main] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 18:20:50.172 [main] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 18:20:50.172 [main] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 18:20:50.172 [main] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 18:20:50.172 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 18:20:50.172 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 18:20:50.172 [main] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 18:20:50.172 [main] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 18:20:50.172 [main] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 18:20:50.172 [main] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 18:20:50.172 [main] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 18:20:50.172 [main] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 18:20:50.172 [main] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 18:20:50.172 [main] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 18:20:50.172 [main] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 18:20:50.172 [main] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 18:20:50.172 [main] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 18:20:50.172 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 18:20:50.407 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@c6da8bb
2023-11-05 18:20:50.408 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 18:20:50.412 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@2142450580 wrapping com.mysql.cj.jdbc.ConnectionImpl@c6da8bb] for JDBC transaction
2023-11-05 18:20:50.414 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@2142450580 wrapping com.mysql.cj.jdbc.ConnectionImpl@c6da8bb] to manual commit
2023-11-05 18:20:50.415 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 18:20:50.415 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO user (id, username, password) VALUES (?, ?, ?)]
2023-11-05 18:20:50.427 [main] INFO  com.zhouyf.service.impl.UserServiceImpl - 用户创建成功
2023-11-05 18:20:50.428 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 18:20:50.428 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO usersettings (userId, theme) VALUES (?, ?)]
2023-11-05 18:20:50.437 [main] DEBUG o.s.jdbc.support.SQLStateSQLExceptionTranslator - Extracted SQL state class 'S1' from value 'S1009'
2023-11-05 18:20:50.438 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction rollback
2023-11-05 18:20:50.438 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Rolling back JDBC transaction on Connection [HikariProxyConnection@2142450580 wrapping com.mysql.cj.jdbc.ConnectionImpl@c6da8bb]
2023-11-05 18:20:50.441 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@2142450580 wrapping com.mysql.cj.jdbc.ConnectionImpl@c6da8bb] after transaction
2023-11-05 18:20:50.443 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 18:20:50.444 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 18:20:50.444 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 18:20:50.452 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 18:20:50.452 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 18:20:50.455 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 18:20:49 CST 2023
2023-11-05 18:20:50.455 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 18:20:50.455 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 18:20:50.456 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@c6da8bb: (connection evicted)
2023-11-05 18:20:50.457 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 18:20:50.457 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 18:23:19.231 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [UserCreateServiceTest]: []
2023-11-05 18:23:19.239 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 18:23:19.247 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [UserCreateServiceTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 18:23:19.248 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 18:23:19.256 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 18:23:19.256 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 18:23:19.283 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 18:23:19.284 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.HikariDataSourceConfig, com.zhouyf.config.TransactionConfig]
2023-11-05 18:23:19.308 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 18:23:19.315 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 18:23:19.359 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserCreateService.class]
2023-11-05 18:23:19.359 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserServiceImpl.class]
2023-11-05 18:23:19.360 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserSettingsServiceImpl.class]
2023-11-05 18:23:19.443 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 18:23:19.446 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 18:23:19.446 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2023-11-05 18:23:19.452 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 18:23:19.454 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2023-11-05 18:23:19.481 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 18:23:19.485 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:23:19.486 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:23:19.486 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:23:19.486 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:23:19.487 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:23:19.491 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:23:19.492 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:23:19.492 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:23:19.492 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:23:19.492 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:23:19.493 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2023-11-05 18:23:19.493 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration'
2023-11-05 18:23:19.499 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionAttributeSource'
2023-11-05 18:23:19.501 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionInterceptor'
2023-11-05 18:23:19.501 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionInterceptor' via factory method to bean named 'transactionAttributeSource'
2023-11-05 18:23:19.504 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'org.springframework.transaction.config.internalTransactionAdvisor' via factory method to bean named 'transactionAttributeSource'
2023-11-05 18:23:19.504 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'org.springframework.transaction.config.internalTransactionAdvisor' via factory method to bean named 'transactionInterceptor'
2023-11-05 18:23:19.508 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 18:23:19.508 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userCreateService'
2023-11-05 18:23:19.509 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userSettingsServiceImpl'
2023-11-05 18:23:19.510 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 18:23:19.512 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 18:23:19.513 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 18:23:19.536 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userServiceImpl'
2023-11-05 18:23:19.536 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 18:23:19.537 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 18:23:19.548 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@50b0bc4c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 18:23:19.549 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@50b0bc4c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 18:23:19.553 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 18:23:19.555 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@50b0bc4c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 18:23:19.556 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@50b0bc4c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 18:23:19.559 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 18:23:19.560 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO user (id, username, password) VALUES (?, ?, ?)]
2023-11-05 18:23:19.561 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 18:23:19.562 [main] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 18:23:19.565 [main] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 18:23:19.565 [main] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 18:23:19.565 [main] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 18:23:19.565 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 18:23:19.565 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 18:23:19.565 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 18:23:19.565 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 18:23:19.565 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 18:23:19.566 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 18:23:19.566 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 18:23:19.566 [main] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 18:23:19.567 [main] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 18:23:19.567 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 18:23:19.567 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 18:23:19.567 [main] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 18:23:19.567 [main] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 18:23:19.567 [main] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 18:23:19.567 [main] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 18:23:19.567 [main] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 18:23:19.567 [main] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 18:23:19.567 [main] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 18:23:19.568 [main] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 18:23:19.568 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 18:23:19.568 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 18:23:19.568 [main] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 18:23:19.568 [main] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 18:23:19.568 [main] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 18:23:19.568 [main] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 18:23:19.568 [main] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 18:23:19.568 [main] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 18:23:19.568 [main] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 18:23:19.568 [main] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 18:23:19.568 [main] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 18:23:19.568 [main] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 18:23:19.568 [main] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 18:23:19.568 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 18:23:19.796 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7a8136b3
2023-11-05 18:23:19.797 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 18:23:19.818 [main] INFO  com.zhouyf.service.impl.UserServiceImpl - 用户创建成功
2023-11-05 18:23:19.818 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 18:23:19.818 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO usersettings (userId, theme) VALUES (?, ?)]
2023-11-05 18:23:19.818 [main] DEBUG o.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2023-11-05 18:23:19.826 [main] DEBUG o.s.jdbc.support.SQLStateSQLExceptionTranslator - Extracted SQL state class 'S1' from value 'S1009'
2023-11-05 18:23:19.828 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@50b0bc4c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 18:23:19.829 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@50b0bc4c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 18:23:19.829 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 18:23:19.838 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@50b0bc4c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 18:23:19.838 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 18:23:19.841 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 18:23:19 CST 2023
2023-11-05 18:23:19.841 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 18:23:19.841 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 18:23:19.842 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@7a8136b3: (connection evicted)
2023-11-05 18:23:19.843 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 18:23:19.844 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-11-05 18:24:36.377 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using ContextCustomizers for test class [UserCreateServiceTest]: []
2023-11-05 18:24:36.385 [main] DEBUG o.s.t.context.util.TestContextSpringFactoriesUtils - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: [jakarta/servlet/ServletContext]
2023-11-05 18:24:36.392 [main] DEBUG o.s.t.c.support.DefaultTestContextBootstrapper - Using TestExecutionListeners for test class [UserCreateServiceTest]: [DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener]
2023-11-05 18:24:36.394 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 18:24:36.404 [main] DEBUG o.s.t.c.s.DependencyInjectionTestExecutionListener - Performing dependency injection for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 18:24:36.404 [main] DEBUG o.s.t.context.support.AbstractGenericContextLoader - Loading ApplicationContext for test class com.zhouyf.test.UserCreateServiceTest
2023-11-05 18:24:36.428 [main] DEBUG org.springframework.core.env.StandardEnvironment - Activating profiles []
2023-11-05 18:24:36.428 [main] DEBUG o.s.t.c.support.AnnotationConfigContextLoader - Registering component classes: [com.zhouyf.config.HikariDataSourceConfig, com.zhouyf.config.TransactionConfig]
2023-11-05 18:24:36.461 [main] DEBUG o.s.context.support.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@78641d23
2023-11-05 18:24:36.470 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2023-11-05 18:24:36.515 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserCreateService.class]
2023-11-05 18:24:36.515 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserServiceImpl.class]
2023-11-05 18:24:36.516 [main] DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner - Identified candidate component class: file [F:\GITHUB\JavaWebOdyssey\Spring\myspring\build\classes\java\main\com\zhouyf\service\impl\UserSettingsServiceImpl.class]
2023-11-05 18:24:36.620 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2023-11-05 18:24:36.621 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2023-11-05 18:24:36.621 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2023-11-05 18:24:36.623 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2023-11-05 18:24:36.625 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2023-11-05 18:24:36.642 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSourceConfig'
2023-11-05 18:24:36.647 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.driverClassName' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:24:36.648 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.jdbcUrl' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:24:36.649 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.username' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:24:36.649 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.password' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:24:36.649 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.readOnly' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:24:36.652 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.connectionTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:24:36.653 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.idleTimeOut' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:24:36.653 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maxLifetime' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:24:36.653 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.maximumPoolSize' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:24:36.654 [main] DEBUG o.s.core.env.PropertySourcesPropertyResolver - Found key 'zyf.database.pool.minimumIdle' in PropertySource 'class path resource [datasource.properties]' with value of type String
2023-11-05 18:24:36.654 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2023-11-05 18:24:36.654 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration'
2023-11-05 18:24:36.659 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionAttributeSource'
2023-11-05 18:24:36.661 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionInterceptor'
2023-11-05 18:24:36.662 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionInterceptor' via factory method to bean named 'transactionAttributeSource'
2023-11-05 18:24:36.665 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'org.springframework.transaction.config.internalTransactionAdvisor' via factory method to bean named 'transactionAttributeSource'
2023-11-05 18:24:36.665 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'org.springframework.transaction.config.internalTransactionAdvisor' via factory method to bean named 'transactionInterceptor'
2023-11-05 18:24:36.667 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionConfig'
2023-11-05 18:24:36.668 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userCreateService'
2023-11-05 18:24:36.670 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userSettingsServiceImpl'
2023-11-05 18:24:36.671 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'jdbcTemplate'
2023-11-05 18:24:36.675 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'hikariDataSource'
2023-11-05 18:24:36.676 [main] DEBUG com.zaxxer.hikari.HikariConfig - Driver class com.mysql.cj.jdbc.Driver found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b
2023-11-05 18:24:36.696 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'userServiceImpl'
2023-11-05 18:24:36.709 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'transactionManager'
2023-11-05 18:24:36.709 [main] DEBUG o.s.b.factory.support.DefaultListableBeanFactory - Autowiring by type from bean name 'transactionManager' via factory method to bean named 'hikariDataSource'
2023-11-05 18:24:36.720 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2023-11-05 18:24:36.722 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2023-11-05 18:24:36.724 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - Before test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 18:24:36.727 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2023-11-05 18:24:36.728 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2023-11-05 18:24:36.734 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [com.zhouyf.service.impl.UserCreateService.createUserWithDefaultSettings]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2023-11-05 18:24:36.735 [main] DEBUG com.zaxxer.hikari.HikariConfig - HikariPool-1 - configuration:
2023-11-05 18:24:36.737 [main] DEBUG com.zaxxer.hikari.HikariConfig - allowPoolSuspension.............false
2023-11-05 18:24:36.738 [main] DEBUG com.zaxxer.hikari.HikariConfig - autoCommit......................true
2023-11-05 18:24:36.738 [main] DEBUG com.zaxxer.hikari.HikariConfig - catalog.........................none
2023-11-05 18:24:36.738 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionInitSql...............none
2023-11-05 18:24:36.738 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTestQuery.............none
2023-11-05 18:24:36.738 [main] DEBUG com.zaxxer.hikari.HikariConfig - connectionTimeout...............3000
2023-11-05 18:24:36.738 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSource......................none
2023-11-05 18:24:36.738 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceClassName.............none
2023-11-05 18:24:36.738 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceJNDI..................none
2023-11-05 18:24:36.738 [main] DEBUG com.zaxxer.hikari.HikariConfig - dataSourceProperties............{password=<masked>}
2023-11-05 18:24:36.739 [main] DEBUG com.zaxxer.hikari.HikariConfig - driverClassName................."com.mysql.cj.jdbc.Driver"
2023-11-05 18:24:36.739 [main] DEBUG com.zaxxer.hikari.HikariConfig - exceptionOverrideClassName......none
2023-11-05 18:24:36.739 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckProperties...........{}
2023-11-05 18:24:36.739 [main] DEBUG com.zaxxer.hikari.HikariConfig - healthCheckRegistry.............none
2023-11-05 18:24:36.739 [main] DEBUG com.zaxxer.hikari.HikariConfig - idleTimeout.....................60000
2023-11-05 18:24:36.739 [main] DEBUG com.zaxxer.hikari.HikariConfig - initializationFailTimeout.......1
2023-11-05 18:24:36.739 [main] DEBUG com.zaxxer.hikari.HikariConfig - isolateInternalQueries..........false
2023-11-05 18:24:36.739 [main] DEBUG com.zaxxer.hikari.HikariConfig - jdbcUrl.........................jdbc:mysql://localhost:3306/blog
2023-11-05 18:24:36.739 [main] DEBUG com.zaxxer.hikari.HikariConfig - keepaliveTime...................0
2023-11-05 18:24:36.739 [main] DEBUG com.zaxxer.hikari.HikariConfig - leakDetectionThreshold..........0
2023-11-05 18:24:36.739 [main] DEBUG com.zaxxer.hikari.HikariConfig - maxLifetime.....................1800000
2023-11-05 18:24:36.740 [main] DEBUG com.zaxxer.hikari.HikariConfig - maximumPoolSize.................60
2023-11-05 18:24:36.740 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricRegistry..................none
2023-11-05 18:24:36.740 [main] DEBUG com.zaxxer.hikari.HikariConfig - metricsTrackerFactory...........none
2023-11-05 18:24:36.740 [main] DEBUG com.zaxxer.hikari.HikariConfig - minimumIdle.....................20
2023-11-05 18:24:36.740 [main] DEBUG com.zaxxer.hikari.HikariConfig - password........................<masked>
2023-11-05 18:24:36.740 [main] DEBUG com.zaxxer.hikari.HikariConfig - poolName........................"HikariPool-1"
2023-11-05 18:24:36.740 [main] DEBUG com.zaxxer.hikari.HikariConfig - readOnly........................false
2023-11-05 18:24:36.740 [main] DEBUG com.zaxxer.hikari.HikariConfig - registerMbeans..................false
2023-11-05 18:24:36.740 [main] DEBUG com.zaxxer.hikari.HikariConfig - scheduledExecutor...............none
2023-11-05 18:24:36.740 [main] DEBUG com.zaxxer.hikari.HikariConfig - schema..........................none
2023-11-05 18:24:36.740 [main] DEBUG com.zaxxer.hikari.HikariConfig - threadFactory...................internal
2023-11-05 18:24:36.740 [main] DEBUG com.zaxxer.hikari.HikariConfig - transactionIsolation............default
2023-11-05 18:24:36.740 [main] DEBUG com.zaxxer.hikari.HikariConfig - username........................"root"
2023-11-05 18:24:36.740 [main] DEBUG com.zaxxer.hikari.HikariConfig - validationTimeout...............5000
2023-11-05 18:24:36.741 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-11-05 18:24:36.973 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@c6da8bb
2023-11-05 18:24:36.974 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-11-05 18:24:36.977 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [HikariProxyConnection@2142450580 wrapping com.mysql.cj.jdbc.ConnectionImpl@c6da8bb] for JDBC transaction
2023-11-05 18:24:36.979 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [HikariProxyConnection@2142450580 wrapping com.mysql.cj.jdbc.ConnectionImpl@c6da8bb] to manual commit
2023-11-05 18:24:36.980 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 18:24:36.981 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO user (id, username, password) VALUES (?, ?, ?)]
2023-11-05 18:24:36.994 [main] INFO  com.zhouyf.service.impl.UserServiceImpl - 用户创建成功
2023-11-05 18:24:36.994 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
2023-11-05 18:24:36.995 [main] DEBUG org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO usersettings (userId, theme) VALUES (?, ?)]
2023-11-05 18:24:37.006 [main] DEBUG o.s.jdbc.support.SQLStateSQLExceptionTranslator - Extracted SQL state class 'S1' from value 'S1009'
2023-11-05 18:24:37.006 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Initiating transaction rollback
2023-11-05 18:24:37.006 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Rolling back JDBC transaction on Connection [HikariProxyConnection@2142450580 wrapping com.mysql.cj.jdbc.ConnectionImpl@c6da8bb]
2023-11-05 18:24:37.009 [main] DEBUG o.s.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [HikariProxyConnection@2142450580 wrapping com.mysql.cj.jdbc.ConnectionImpl@c6da8bb] after transaction
2023-11-05 18:24:37.011 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2023-11-05 18:24:37.012 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2023-11-05 18:24:37.012 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test method: class [UserCreateServiceTest], method [test], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2023-11-05 18:24:37.019 [main] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@450794b4 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2023-11-05 18:24:37.020 [main] DEBUG o.s.t.c.s.AbstractDirtiesContextTestExecutionListener - After test class: class [UserCreateServiceTest], class annotated with @DirtiesContext [false] with mode [null]
2023-11-05 18:24:37.021 [SpringContextShutdownHook] DEBUG o.s.context.support.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@78641d23, started on Sun Nov 05 18:24:36 CST 2023
2023-11-05 18:24:37.022 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-11-05 18:24:37.022 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)
2023-11-05 18:24:37.023 [HikariPool-1 connection closer] DEBUG com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Closing connection com.mysql.cj.jdbc.ConnectionImpl@c6da8bb: (connection evicted)
2023-11-05 18:24:37.024 [SpringContextShutdownHook] DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
2023-11-05 18:24:37.024 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
